window.geodirJSGoMap=!0;function M(){(function(s){(window.gdSetMap=="google"||window.gdSetMap=="auto")&&window.google&&typeof google.maps<"u"?gdMaps="google":(window.gdSetMap=="osm"||window.gdSetMap=="auto")&&typeof L<"u"&&typeof L.version<"u"?gdMaps="osm":gdMaps=null,window.gdMaps=window.gdMaps||gdMaps,window.gdMaps==="google"?(console.log("Google Maps API Loaded :)"),jQuery("body").addClass("gd-google-maps")):window.gdMaps==="osm"?(console.log("Leaflet | OpenStreetMap API Loaded :)"),jQuery("body").addClass("gd-osm-gmaps")):(console.log("Maps API Not Loaded :("),jQuery("body").addClass("gd-no-gmaps")),console.log(window.gdSetMap),console.log(gdMaps);var y=window.gdMaps=="google"&&typeof google<"u"&&typeof google.maps<"u"&&typeof google.maps.Geocoder<"u"?new google.maps.Geocoder:{};function u(e,o){typeof o<"u"?o.setMap(e):this.setMap(e)}u.prototype=window.gdMaps=="google"&&typeof google<"u"&&typeof google.maps<"u"&&typeof google.maps.OverlayView<"u"?new google.maps.OverlayView:{},u.prototype.onAdd=function(){},u.prototype.onRemove=function(){},u.prototype.draw=function(){},s.goMap={},s.fn.goMap=function(e){return this.each(function(){var o=s(this).data("goMap");if(!o&&window.gdMaps=="google"){var t=s.extend(!0,{},s.goMapBase);s(this).data("goMap",t.init(this,e)),s.goMap=t}else if(!o&&window.gdMaps=="osm"){var i=s.extend(!0,{},s.osmMapBase);s(this).data("goMap",i.init(this,e)),s.goMap=i}else s.goMap=o})},s.osmMapBase={defaults:{address:"",latitude:window.gdBaseLat?window.gdBaseLat:56.9,longitude:window.gdBaseLng?window.gdBaseLng:24.1,zoom:parseInt(window.gdBaseZoom)>0?parseInt(window.gdBaseZoom):4,delay:200,hideByClick:!0,oneInfoWindow:!0,prefixId:"gomarker",polyId:"gopoly",groupId:"gogroup",navigationControl:!0,navigationControlOptions:{position:"topleft",style:"DEFAULT"},mapTypeControl:!0,mapTypeControlOptions:{position:"topright",style:"DEFAULT"},zoomControl:!0,zoomControlOptions:{position:"topleft"},scaleControl:!1,scrollwheel:!0,fullscreenControl:!1,directions:!1,directionsResult:null,disableDoubleClickZoom:!1,touchZoom:"*",streetViewControl:!0,maxClusterRadius:80,streetViewControlOptions:{position:"bottomleft"},markers:[],overlays:[],polyline:{color:"#FF0000",opacity:1,weight:2},polygon:{color:"#FF0000",opacity:1,weight:2,fillColor:"#FF0000",fillOpacity:.2},circle:{color:"#FF0000",opacity:1,weight:2,fillColor:"#FF0000",fillOpacity:.2},rectangle:{color:"#FF0000",opacity:1,weight:2,fillColor:"#FF0000",fillOpacity:.2},maptype:"ROADMAP",html_prepend:"<div class=gomapMarker>",html_append:"</div>",addMarker:!1,osmBaseLayer:null,osmOverlays:[]},map:null,count:0,markers:[],polylines:[],polygons:[],circles:[],rectangles:[],tmpMarkers:[],geoMarkers:[],lockGeocode:!1,bounds:null,overlays:null,overlay:null,mapId:null,plId:null,pgId:null,cId:null,rId:null,opts:null,centerLatLng:null,init:function(e,o){var t=s.extend(!0,{},s.osmMapBase.defaults,o),i,a;this.mapId=s(e),this.opts=t,t.address?this.geocode({address:t.address,center:!0}):Array.isArray(t.markers)&&t.markers.length>0?t.markers[0].address?this.geocode({address:t.markers[0].address,center:!0}):this.centerLatLng=L.latLng(t.markers[0].latitude,t.markers[0].longitude):this.centerLatLng=L.latLng(t.latitude,t.longitude);var n={center:this.centerLatLng,zoom:parseInt(t.zoom),minZoom:t.minZoom?t.minZoom:1,maxZoom:t.maxZoom>18?18:t.maxZoom,zoomControl:!(t.zoomControl==="0"||!t.zoomControl),touchZoom:t.touchZoom,doubleClickZoom:t.disableDoubleClickZoom==="0"||!t.disableDoubleClickZoom,dragging:typeof t.dragging<"u"?t.dragging:!L.Browser.mobile,tap:typeof t.dragging<"u"?t.dragging:!L.Browser.mobile,worldCopyJump:!0,scrollWheelZoom:t.scrollwheel==="0"||!t.scrollwheel?!1:t.scrollwheel,attributionControl:typeof t.attributionControl<"u"?t.attributionControl:!0,defaultBaseLayer:typeof t.osmBaseLayer<"u"&&t.osmBaseLayer?t.osmBaseLayer:null,defaultOverlays:typeof t.osmOverlays<"u"&&t.osmOverlays?t.osmOverlays:[]};if(n.defaultBaseLayer)try{if(i=L.tileLayer.provider(n.defaultBaseLayer),i&&i._url&&i._url.indexOf("apikey=")===-1&&!(i.options&&i.options.apiKey)){var r=typeof t.osmApiKey<"u"&&t.osmApiKey?t.osmApiKey:"5e8a41b90fc240c09f61eb6bbbfb8395";i._url+=(i._url.indexOf("?")===-1?"?":"&")+"apikey="+r}a=!0}catch(l){console.log(l)}if(!i)var h="//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",f='Map data &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors',i=L.tileLayer(h,{maxZoom:t.maxZoom,attribution:f});if(this.map=new L.Map(e,n).addLayer(i),a&&n.defaultOverlays&&n.defaultOverlays.length>0){for(var c in n.defaultOverlays)if(n.defaultOverlays[c])try{L.tileLayer.provider(n.defaultOverlays[c]).addTo(this.map)}catch(l){console.log(l)}}if(n.zoomControl&&(zoomPosition=this.parsePosition(t.zoomControlOptions.position,"topleft"))!=="topleft"&&this.map.zoomControl.setPosition(zoomPosition),parseInt(o.marker_cluster)===1&&!o.marker_cluster_server){let l=function(p,d,v,O){p=Math.min(p,d),v>1e3&&(jQuery("#gdOSMprogress").show(),jQuery("#gdOSMprogressBar").width(Math.round(p/d*100)+"%")),p===d&&jQuery("#gdOSMprogress").hide()};var C=l;jQuery("#gdOSMprogress").remove(),jQuery("#gdOSMprogressBar").remove(),jQuery(e).before('<div id="gdOSMprogress"><div id="gdOSMprogressBar"></div></div>'),this.gdlayers=new L.markerClusterGroup({spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,chunkedLoading:!0,maxClusterRadius:parseInt(t.maxClusterRadius)>0?parseInt(t.maxClusterRadius):80,chunkProgress:l})}else this.gdlayers=new L.featureGroup([]);try{this.oms=new OverlappingMarkerSpiderfier(this.map)}catch{}for(var m=0,w=t.markers.length;m<w;m++)this.createMarker(t.markers[m]);var g=this;return t.addMarker==!0||t.addMarker=="multi"?L.DomEvent.addListener(g.map,"click",function(l){var p={position:l.latLng,draggable:!0},d=g.createMarker(p);L.DomEvent.addListener(d,"dblclick",function(v){d.setMap(null),g.removeMarker(d.id)})}):t.addMarker=="single"&&L.DomEvent.addListener(g.map,"click",function(l){if(!g.singleMarker){var p={position:l.latLng,draggable:!0},d=g.createMarker(p);g.singleMarker=!0,L.DomEvent.addListener(d,"dblclick",function(v){d.setMap(null),g.removeMarker(d.id),g.singleMarker=!1})}}),delete t.markers,delete t.overlays,this},ready:function(e){this.map.addOneTimeEventListener("moveend",function(){return e()})},Geocoder:function(e){return new L.Control.gdGeoCode({provider:new L.gdGeoCode.Provider.OpenStreetMap})},geocode:function(e,o){var t=new L.Control.gdGeoCode({provider:new L.gdGeoCode.Provider.OpenStreetMap});t.geosearch(e)},parsePosition:function(e,o){var t=e;if(e&&typeof e=="string")switch(e.toUpperCase()){case"TOP":case"LEFT":case"TOP_LEFT":case"topleft":t="topleft";break;case"RIGHT":case"TOP_RIGHT":case"topright":t="topright";break;case"BOTTOM":case"BOTTOM_LEFT":case"bottomleft":t="bottomleft";break;case"BOTTOM_RIGHT":case"bottomright":t="bottomright";break;default:t=typeof o<"u"?o:t;break}else typeof o<"u"&&(t=o);return t},geoMarker:function(){if(this.geoMarkers.length>0&&!this.lockGeocode){this.lockGeocode=!0;var e=this.geoMarkers.splice(0,1);this.geocode({address:e[0].address},e[0])}else if(this.lockGeocode){var o=this;setTimeout(function(){o.geoMarker()},this.opts.delay)}},setMap:function(e){delete e.mapTypeId,e.address?(this.geocode({address:e.address,center:!0}),delete e.address):e.latitude&&e.longitude&&(e.center=L.latLng(e.latitude,e.longitude),delete e.longitude,delete e.latitude),e.mapTypeControlOptions&&e.mapTypeControlOptions.position&&(e.mapTypeControlOptions.position=e.mapTypeControlOptions.position.toLowerCase()),e.navigationControlOptions&&e.navigationControlOptions.position&&(e.navigationControlOptions.position=e.navigationControlOptions.position.toLowerCase()),L.Util.setOptions(this.map,e)},getMap:function(){return this.map},setInfoWindow:function(e,o){var t=this;o.content=t.opts.html_prepend+o.content+t.opts.html_append;var i=e.bindPopup(o);i.show=!1,s(t.mapId).data(e.id+"info",i),o.popup&&(t.openWindow(i,e,o),i.show=!0),L.DomEvent.addListener(e,"click",function(){i.show&&t.opts.hideByClick?(i.close(),i.show=!1):(t.openWindow(i,e,o),i.show=!0)})},openWindow:function(e,o,t){this.opts.oneInfoWindow&&this.clearInfo(),t.ajax?(e.openPopup(),s.ajax({url:t.ajax,success:function(i){e.setContent(i)}})):(t.id&&e.setContent(s(t.id).html()),e.openPopup())},setInfo:function(e,o){var t=s(this.mapId).data(e+"info");typeof o=="object"?t.setOptions(o):t.setContent(o)},getInfo:function(e,o){var t=s(this.mapId).data(e+"info").getContent();return o?s(t).html():t},clearInfo:function(){for(var e=0,o=this.markers.length;e<o;e++){var t=s(this.mapId).data(this.markers[e]+"info");t&&(t.popupclose(),t.show=!1)}},fitBounds:function(e,o){var t=this;if(this.getMarkerCount()!=this.getTmpMarkerCount())setTimeout(function(){t.fitBounds(e,o)},this.opts.delay);else{if(this.bounds=new L.LatLngBounds([]),!e||e&&e=="all")for(var i=0,a=this.markers.length;i<a;i++)this.bounds.extend(s(this.mapId).data(this.markers[i]).position);else if(e&&e=="visible")for(var i=0,a=this.markers.length;i<a;i++)this.getVisibleMarker(this.markers[i])&&this.bounds.extend(s(this.mapId).data(this.markers[i]).position);else if(e&&e=="markers"&&Array.isArray(o))for(var i=0,a=o.length;i<a;i++)this.bounds.extend(s(this.mapId).data(o[i]).position);this.map.fitBounds(this.bounds)}},getBounds:function(){return this.map.getBounds()},getGDMarkers:function(){return this.gdlayers},getMarkerCount:function(){return this.markers.length},getTmpMarkerCount:function(){return this.tmpMarkers.length},getMarkers:function(e,o){var t=[];switch(e){case"markers":for(var i=0,a=this.markers.length;i<a;i++){var n=s(this.mapId).data(this.markers[i]);t.push(n)}break;default:for(var i=0,a=this.markers.length;i<a;i++){var n=s(this.mapId).data(this.markers[i]).getPosition().toUrlValue();t.push(n)}break}return t},createMarker:function(e){if(e.geocode||(this.count++,e.id||(e.id=this.opts.prefixId+this.count),this.tmpMarkers.push(e.id)),e.address&&!e.geocode)this.geoMarkers.push(e),this.geoMarker();else if(e.latitude&&e.longitude||e.position){var o={map:this.map};if(o.id=e.id,o.group=e.group?e.group:this.opts.groupId,o.zIndex=e.zIndex?e.zIndex:0,o.zIndexOrg=e.zIndexOrg?e.zIndexOrg:0,e.visible==!1&&(o.visible=e.visible),e.title&&(o.title=e.title),e.alt&&(o.alt=e.alt),e.label&&(o.label=e.label),e.draggable&&(o.draggable=e.draggable),e.icon&&e.icon.image?(o.icon=e.icon.image,e.icon.shadow&&(o.shadow=e.icon.shadow)):e.icon?o.icon=e.icon:this.opts.icon&&this.opts.icon.image?(o.icon=this.opts.icon.image,this.opts.icon.shadow&&(o.shadow=this.opts.icon.shadow)):this.opts.icon&&(o.icon=this.opts.icon),o.icon){if(iconOptions={iconUrl:o.icon,iconSize:null,iconAnchor:[17,0],popupAnchor:null},e.iconSize&&(iconOptions.iconSize=e.iconSize),e.iconAnchor&&(iconOptions.iconAnchor=e.iconAnchor),e.popupAnchor&&(iconOptions.popupAnchor=e.popupAnchor),e.iconRetinaUrl&&(iconOptions.iconRetinaUrl=e.iconRetinaUrl),e.shadowUrl&&(iconOptions.shadowUrl=e.shadowUrl),e.shadowRetinaUrl&&(iconOptions.shadowRetinaUrl=e.shadowRetinaUrl),e.shadowSize&&(iconOptions.shadowSize=e.shadowSize),e.shadowAnchor&&(iconOptions.shadowAnchor=e.shadowAnchor),e.className&&(iconOptions.className=e.className),e.clustered){o.clustered=!0;var t="marker-cluster marker-cluster-";e.title<10?t+="small":e.title<100?t+="medium":t+="large",iconOptions.className=t,iconOptions.html="<div><span>"+e.title+"</span></div>",e.w=40,e.h=40}if(!iconOptions.iconSize&&e.w&&e.h&&parseInt(e.w)>0&&parseInt(e.h)>0){var i=parseFloat(e.w),a=parseFloat(e.h);iconOptions.iconSize=[i,a],iconOptions.iconAnchor=[i/2-1,a],iconOptions.popupAnchor=[0,a*-1+a*.05]}e.clustered?o.icon=new L.DivIcon(iconOptions):o.icon=L.icon(iconOptions)}else o.icon=new L.Icon.Default;o.position=e.position?e.position:L.latLng(e.latitude,e.longitude);var n=new L.Marker(o.position,o);return e.html&&!e.clustered&&(!e.html.content&&!e.html.ajax&&!e.html.id?e.html={content:e.html}:e.html.content||(e.html.content=null),this.setInfoWindow(n,e.html)),e.addToMap?(n.addTo(this.map),n):(this.addMarker(n),n)}},addMarker:function(e){this.gdlayers.addLayer(e)},removeMarker:function(e){if(e=="map_me")return jQuery.goMap.gdUmarker&&(this.map.removeLayer(jQuery.goMap.gdUmarker),jQuery.goMap.gdUmarker=null),!0;var o=s.inArray(e,this.markers),t;if(o>-1){this.tmpMarkers.splice(o,1),t=this.markers.splice(o,1);var i=t[0],e=s(this.mapId).data(i),a=s(this.mapId).data(i+"info");return e.setVisible(!1),e.setMap(null),s(this.mapId).removeData(i),a&&(a.close(),a.show=!1,s(this.mapId).removeData(i+"info")),!0}return!1},clearMarkers:function(){var e=this.gdlayers;this.gdlayers.eachLayer(function(o){e.removeLayer(o)}),this.gdlayers=e,this.singleMarker=!1,this.lockGeocode=!1,this.markers=[],this.tmpMarkers=[],this.geoMarkers=[]},isVisible:function(e){return this.map.getBounds().contains(e)}},s.goMapBase={defaults:{address:"",latitude:window.gdBaseLat?window.gdBaseLat:56.9,longitude:window.gdBaseLng?window.gdBaseLng:24.1,zoom:parseInt(window.gdBaseZoom)>0?parseInt(window.gdBaseZoom):4,delay:200,hideByClick:!0,oneInfoWindow:!0,prefixId:"gomarker",polyId:"gopoly",groupId:"gogroup",navigationControl:!0,navigationControlOptions:{position:"TOP_LEFT",style:"DEFAULT"},mapTypeControl:!0,mapTypeControlOptions:{position:"TOP_RIGHT",style:"DEFAULT"},zoomControl:!0,zoomControlOptions:{position:"LEFT_CENTER"},cameraControl:!1,cameraControlOptions:{position:"LEFT_CENTER"},scaleControl:!1,scrollwheel:!0,fullscreenControl:!1,directions:!1,directionsResult:null,disableDoubleClickZoom:!1,streetViewControl:!0,clickableIcons:!0,streetViewControlOptions:{position:"LEFT_CENTER"},markers:[],overlays:[],polyline:{color:"#FF0000",opacity:1,weight:2},polygon:{color:"#FF0000",opacity:1,weight:2,fillColor:"#FF0000",fillOpacity:.2},circle:{color:"#FF0000",opacity:1,weight:2,fillColor:"#FF0000",fillOpacity:.2},rectangle:{color:"#FF0000",opacity:1,weight:2,fillColor:"#FF0000",fillOpacity:.2},maptype:"ROADMAP",html_prepend:"<div class=gomapMarker>",html_append:"</div>",addMarker:!1},map:null,count:0,markers:[],polylines:[],polygons:[],circles:[],rectangles:[],tmpMarkers:[],geoMarkers:[],lockGeocode:!1,bounds:null,overlays:null,overlay:null,mapId:null,plId:null,pgId:null,cId:null,rId:null,opts:null,centerLatLng:null,init:function(e,o){var t=s.extend(!0,{},s.goMapBase.defaults,o);this.mapId=s(e),this.opts=t,t.address?this.geocode({address:t.address,center:!0}):Array.isArray(t.markers)&&t.markers.length>0?t.markers[0].address?this.geocode({address:t.markers[0].address,center:!0}):this.centerLatLng=new google.maps.LatLng(t.markers[0].latitude,t.markers[0].longitude):this.centerLatLng=new google.maps.LatLng(t.latitude,t.longitude);var i={center:this.centerLatLng,disableDoubleClickZoom:!(t.disableDoubleClickZoom==="0"||!t.disableDoubleClickZoom),mapTypeControl:!(t.mapTypeControl==="0"||!t.mapTypeControl),streetViewControl:!(t.streetViewControl==="0"||!t.streetViewControl),streetViewControlOptions:{position:google.maps.ControlPosition[t.streetViewControlOptions.position.toUpperCase()]},mapTypeControlOptions:{position:google.maps.ControlPosition[t.mapTypeControlOptions.position.toUpperCase()],style:google.maps.MapTypeControlStyle[t.mapTypeControlOptions.style.toUpperCase()]},mapTypeId:google.maps.MapTypeId[t.maptype.toUpperCase()],navigationControl:t.navigationControl,navigationControlOptions:{position:google.maps.ControlPosition[t.navigationControlOptions.position.toUpperCase()],style:google.maps.NavigationControlStyle[t.navigationControlOptions.style.toUpperCase()]},zoomControl:!(t.zoomControl==="0"||!t.zoomControl),zoomControlOptions:{position:google.maps.ControlPosition[t.zoomControlOptions.position.toUpperCase()]},cameraControl:!(t.cameraControl==="0"||!t.cameraControl),cameraControlOptions:{position:google.maps.ControlPosition[t.cameraControlOptions.position.toUpperCase()]},scaleControl:!(t.scaleControl==="0"||!t.scaleControl),scrollwheel:!(t.scrollwheel==="0"||!t.scrollwheel),fullscreenControl:!(t.fullscreenControl==="0"||!t.fullscreenControl),zoom:parseInt(t.zoom),minZoom:t.minZoom?parseInt(t.minZoom):0,maxZoom:parseInt(t.maxZoom),clickableIcons:!(t.clickableIcons==="0"||!t.clickableIcons)};this.map=new google.maps.Map(e,i),this.overlay=new u(this.map);try{this.oms=new OverlappingMarkerSpiderfier(this.map,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0})}catch{}this.overlays={polyline:{id:"plId",array:"polylines",create:"createPolyline"},polygon:{id:"pgId",array:"polygons",create:"createPolygon"},circle:{id:"cId",array:"circles",create:"createCircle"},rectangle:{id:"rId",array:"rectangles",create:"createRectangle"}},this.plId=s('<div style="display:none;"/>').appendTo(this.mapId),this.pgId=s('<div style="display:none;"/>').appendTo(this.mapId),this.cId=s('<div style="display:none;"/>').appendTo(this.mapId),this.rId=s('<div style="display:none;"/>').appendTo(this.mapId);for(var a=0,n=t.markers.length;a<n;a++)this.createMarker(t.markers[a]);for(var a=0,n=t.overlays.length;a<n;a++)this[this.overlays[t.overlays[a].type].create](t.overlays[a]);var r=this;return t.addMarker==!0||t.addMarker=="multi"?google.maps.event.addListener(r.map,"click",function(h){var f={position:h.latLng,draggable:!0},c=r.createMarker(f);google.maps.event.addListener(c,"dblclick",function(m){c.setMap(null),r.removeMarker(c.id)})}):t.addMarker=="single"&&google.maps.event.addListener(r.map,"click",function(h){if(!r.singleMarker){var f={position:h.latLng,draggable:!0},c=r.createMarker(f);r.singleMarker=!0,google.maps.event.addListener(c,"dblclick",function(m){c.setMap(null),r.removeMarker(c.id),r.singleMarker=!1})}}),delete t.markers,delete t.overlays,this},ready:function(e){google.maps.event.addListenerOnce(this.map,"bounds_changed",function(){return e()})},geocode:function(e,o){var t=this;setTimeout(function(){y.geocode({address:e.address},function(i,a){a==google.maps.GeocoderStatus.OK&&e.center&&t.map.setCenter(i[0].geometry.location),a==google.maps.GeocoderStatus.OK&&o&&o.markerId?o.markerId.setPosition(i[0].geometry.location):a==google.maps.GeocoderStatus.OK&&o?t.lockGeocode&&(t.lockGeocode=!1,o.position=i[0].geometry.location,o.geocode=!0,t.createMarker(o)):a==google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&t.geocode(e,o)})},this.opts.delay)},geoMarker:function(){if(this.geoMarkers.length>0&&!this.lockGeocode){this.lockGeocode=!0;var e=this.geoMarkers.splice(0,1);this.geocode({address:e[0].address},e[0])}else if(this.lockGeocode){var o=this;setTimeout(function(){o.geoMarker()},this.opts.delay)}},setMap:function(e){delete e.mapTypeId,e.address?(this.geocode({address:e.address,center:!0}),delete e.address):e.latitude&&e.longitude&&(e.center=new google.maps.LatLng(e.latitude,e.longitude),delete e.longitude,delete e.latitude),e.mapTypeControlOptions&&e.mapTypeControlOptions.position&&(e.mapTypeControlOptions.position=google.maps.ControlPosition[e.mapTypeControlOptions.position.toUpperCase()]),e.mapTypeControlOptions&&e.mapTypeControlOptions.style&&(e.mapTypeControlOptions.style=google.maps.MapTypeControlStyle[e.mapTypeControlOptions.style.toUpperCase()]),e.navigationControlOptions&&e.navigationControlOptions.position&&(e.navigationControlOptions.position=google.maps.ControlPosition[e.navigationControlOptions.position.toUpperCase()]),e.navigationControlOptions&&e.navigationControlOptions.style&&(e.navigationControlOptions.style=google.maps.NavigationControlStyle[e.navigationControlOptions.style.toUpperCase()]),this.map.setOptions(e)},getMap:function(){return this.map},createListener:function(e,o,t){var i;if(typeof e!="object"&&(e={type:e}),e.type=="map"?i=this.map:e.type=="marker"&&e.marker?i=s(this.mapId).data(e.marker):e.type=="info"&&e.marker&&(i=s(this.mapId).data(e.marker+"info")),i)return google.maps.event.addListener(i,o,t);if((e.type=="marker"||e.type=="info")&&this.getMarkerCount()!=this.getTmpMarkerCount())var a=this;setTimeout(function(){a.createListener(e,o,t)},this.opts.delay)},removeListener:function(e){google.maps.event.removeListener(e)},setInfoWindow:function(e,o){var t=this;o.content=t.opts.html_prepend+o.content+t.opts.html_append;var i=new google.maps.InfoWindow(o);i.show=!1,s(t.mapId).data(e.id+"info",i),o.popup&&(t.openWindow(i,e,o),i.show=!0),google.maps.event.addListener(e,"click",function(){i.show&&t.opts.hideByClick?(i.close(),i.show=!1):(t.openWindow(i,e,o),i.show=!0)})},openWindow:function(e,o,t){this.opts.oneInfoWindow&&this.clearInfo(),t.ajax?(e.open(this.map,o),s.ajax({url:t.ajax,success:function(i){e.setContent(i)}})):t.id?(e.setContent(s(t.id).html()),e.open(this.map,o)):e.open(this.map,o)},setInfo:function(e,o){var t=s(this.mapId).data(e+"info");typeof o=="object"?t.setOptions(o):t.setContent(o)},getInfo:function(e,o){var t=s(this.mapId).data(e+"info").getContent();return o?s(t).html():t},clearInfo:function(){for(var e=0,o=this.markers.length;e<o;e++){var t=s(this.mapId).data(this.markers[e]+"info");t&&(t.close(),t.show=!1)}},fitBounds:function(e,o){var t=this;if(this.getMarkerCount()!=this.getTmpMarkerCount())setTimeout(function(){t.fitBounds(e,o)},this.opts.delay);else{if(this.bounds=new google.maps.LatLngBounds,!e||e&&e=="all")for(var i=0,a=this.markers.length;i<a;i++)this.bounds.extend(s(this.mapId).data(this.markers[i]).position);else if(e&&e=="visible")for(var i=0,a=this.markers.length;i<a;i++)this.getVisibleMarker(this.markers[i])&&this.bounds.extend(s(this.mapId).data(this.markers[i]).position);else if(e&&e=="markers"&&Array.isArray(o))for(var i=0,a=o.length;i<a;i++)this.bounds.extend(s(this.mapId).data(o[i]).position);this.map.fitBounds(this.bounds)}},getBounds:function(){return this.map.getBounds()},createPolyline:function(e){return e.type="polyline",this.createOverlay(e)},createPolygon:function(e){return e.type="polygon",this.createOverlay(e)},createCircle:function(e){return e.type="circle",this.createOverlay(e)},createRectangle:function(e){return e.type="rectangle",this.createOverlay(e)},createOverlay:function(e){var o=[];switch(e.id||(this.count++,e.id=this.opts.polyId+this.count),e.type){case"polyline":if(e.coords.length>0){for(var t=0,i=e.coords.length;t<i;t++)o.push(new google.maps.LatLng(e.coords[t].latitude,e.coords[t].longitude));o=new google.maps.Polyline({map:this.map,path:o,strokeColor:e.color?e.color:this.opts.polyline.color,strokeOpacity:e.opacity?e.opacity:this.opts.polyline.opacity,strokeWeight:e.weight?e.weight:this.opts.polyline.weight})}else return!1;break;case"polygon":if(e.coords.length>0){for(var t=0,i=e.coords.length;t<i;t++)o.push(new google.maps.LatLng(e.coords[t].latitude,e.coords[t].longitude));o=new google.maps.Polygon({map:this.map,path:o,strokeColor:e.color?e.color:this.opts.polygon.color,strokeOpacity:e.opacity?e.opacity:this.opts.polygon.opacity,strokeWeight:e.weight?e.weight:this.opts.polygon.weight,fillColor:e.fillColor?e.fillColor:this.opts.polygon.fillColor,fillOpacity:e.fillOpacity?e.fillOpacity:this.opts.polygon.fillOpacity})}else return!1;break;case"circle":o=new google.maps.Circle({map:this.map,center:new google.maps.LatLng(e.latitude,e.longitude),radius:e.radius,strokeColor:e.color?e.color:this.opts.circle.color,strokeOpacity:e.opacity?e.opacity:this.opts.circle.opacity,strokeWeight:e.weight?e.weight:this.opts.circle.weight,fillColor:e.fillColor?e.fillColor:this.opts.circle.fillColor,fillOpacity:e.fillOpacity?e.fillOpacity:this.opts.circle.fillOpacity});break;case"rectangle":o=new google.maps.Rectangle({map:this.map,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(e.sw.latitude,e.sw.longitude),new google.maps.LatLng(e.ne.latitude,e.ne.longitude)),strokeColor:e.color?e.color:this.opts.circle.color,strokeOpacity:e.opacity?e.opacity:this.opts.circle.opacity,strokeWeight:e.weight?e.weight:this.opts.circle.weight,fillColor:e.fillColor?e.fillColor:this.opts.circle.fillColor,fillOpacity:e.fillOpacity?e.fillOpacity:this.opts.circle.fillOpacity});break;default:return!1}return this.addOverlay(e,o),o},addOverlay:function(e,o){s(this[this.overlays[e.type].id]).data(e.id,o),this[this.overlays[e.type].array].push(e.id)},setOverlay:function(e,o,t){if(o=s(this[this.overlays[e].id]).data(o),t.coords&&t.coords.length>0){for(var i=[],a=0,n=t.coords.length;a<n;a++)i.push(new google.maps.LatLng(t.coords[a].latitude,t.coords[a].longitude));t.path=i,delete t.coords}else t.ne&&t.sw?(t.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude)),delete t.ne,delete t.sw):t.latitude&&t.longitude&&(t.center=new google.maps.LatLng(t.latitude,t.longitude),delete t.latitude,delete t.longitude);o.setOptions(t)},showHideOverlay:function(e,o,t){typeof t>"u"&&(this.getVisibleOverlay(e,o)?t=!1:t=!0),t?s(this[this.overlays[e].id]).data(o).setMap(this.map):s(this[this.overlays[e].id]).data(o).setMap(null)},getVisibleOverlay:function(e,o){return!!s(this[this.overlays[e].id]).data(o).getMap()},getOverlaysCount:function(e){return this[this.overlays[e].array].length},removeOverlay:function(e,o){var t=s.inArray(o,this[this.overlays[e].array]),i;if(t>-1){i=this[this.overlays[e].array].splice(t,1);var a=i[0];return s(this[this.overlays[e].id]).data(a).setMap(null),s(this[this.overlays[e].id]).removeData(a),!0}return!1},clearOverlays:function(e){for(var o=0,t=this[this.overlays[e].array].length;o<t;o++){var i=this[this.overlays[e].array][o];s(this[this.overlays[e].id]).data(i).setMap(null),s(this[this.overlays[e].id]).removeData(i)}this[this.overlays[e].array]=[]},showHideMarker:function(e,o){if(typeof o>"u")if(this.getVisibleMarker(e)){s(this.mapId).data(e).setVisible(!1);var t=s(this.mapId).data(e+"info");t&&t.show&&(t.close(),t.show=!1)}else s(this.mapId).data(e).setVisible(!0);else s(this.mapId).data(e).setVisible(o)},showHideMarkerByGroup:function(e,o){for(var t=0,i=this.markers.length;t<i;t++){var a=this.markers[t],n=s(this.mapId).data(a);if(n.group==e)if(typeof o>"u")if(this.getVisibleMarker(a)){n.setVisible(!1);var r=s(this.mapId).data(a+"info");r&&r.show&&(r.close(),r.show=!1)}else n.setVisible(!0);else n.setVisible(o)}},getVisibleMarker:function(e){return s(this.mapId).data(e).getVisible()},getMarkerCount:function(){return this.markers.length},getTmpMarkerCount:function(){return this.tmpMarkers.length},getVisibleMarkerCount:function(){return this.getMarkers("visiblesInMap").length},getMarkerByGroupCount:function(e){return this.getMarkers("group",e).length},getMarkers:function(e,o){var t=[];switch(e){case"json":for(var i=0,a=this.markers.length;i<a;i++){var n="'"+i+"': '"+s(this.mapId).data(this.markers[i]).getPosition().toUrlValue()+"'";t.push(n)}t="{'markers':{"+t.join(",")+"}}";break;case"data":for(var i=0,a=this.markers.length;i<a;i++){var n="marker["+i+"]="+s(this.mapId).data(this.markers[i]).getPosition().toUrlValue();t.push(n)}t=t.join("&");break;case"visiblesInBounds":for(var i=0,a=this.markers.length;i<a;i++)this.isVisible(s(this.mapId).data(this.markers[i]).getPosition())&&t.push(this.markers[i]);break;case"visiblesInMap":for(var i=0,a=this.markers.length;i<a;i++)this.getVisibleMarker(this.markers[i])&&t.push(this.markers[i]);break;case"group":if(o)for(var i=0,a=this.markers.length;i<a;i++)s(this.mapId).data(this.markers[i]).group==o&&t.push(this.markers[i]);break;case"markers":for(var i=0,a=this.markers.length;i<a;i++){var n=s(this.mapId).data(this.markers[i]);t.push(n)}break;default:for(var i=0,a=this.markers.length;i<a;i++){var n=s(this.mapId).data(this.markers[i]).getPosition().toUrlValue();t.push(n)}break}return t},getVisibleMarkers:function(){return this.getMarkers("visiblesInBounds")},createMarker:function(e){if(e.geocode||(this.count++,e.id||(e.id=this.opts.prefixId+this.count),this.tmpMarkers.push(e.id)),e.address&&!e.geocode)this.geoMarkers.push(e),this.geoMarker();else if(e.latitude&&e.longitude||e.position){var o={map:this.map};o.id=e.id,o.group=e.group?e.group:this.opts.groupId,o.zIndex=e.zIndex?e.zIndex:0,o.zIndexOrg=e.zIndexOrg?e.zIndexOrg:0,o.optimized=!1,e.visible==!1&&(o.visible=e.visible),e.title&&(o.title=e.title),e.label&&(o.label=e.label),e.draggable&&(o.draggable=e.draggable),e.icon&&e.icon.image?(o.icon=e.icon.image,e.icon.shadow&&(o.shadow=e.icon.shadow)):e.icon?o.icon=e.icon:this.opts.icon&&this.opts.icon.image?(o.icon=this.opts.icon.image,this.opts.icon.shadow&&(o.shadow=this.opts.icon.shadow)):this.opts.icon&&(o.icon=this.opts.icon),o.position=e.position?e.position:new google.maps.LatLng(e.latitude,e.longitude),e.animation&&(o.animation=e.animation);var t=new google.maps.Marker(o);return e.html&&(!e.html.content&&!e.html.ajax&&!e.html.id?e.html={content:e.html}:e.html.content||(e.html.content=null),this.setInfoWindow(t,e.html)),this.addMarker(t),t}},addMarker:function(e){s(this.mapId).data(e.id,e),this.markers.push(e.id)},setMarker:function(e,o){var t=s(this.mapId).data(e);if(delete o.id,delete o.visible,o.icon){var i=o.icon;delete o.icon,i&&i=="default"?this.opts.icon&&this.opts.icon.image?(o.icon=this.opts.icon.image,this.opts.icon.shadow&&(o.shadow=this.opts.icon.shadow)):this.opts.icon&&(o.icon=this.opts.icon):i&&i.image?(o.icon=i.image,i.shadow&&(o.shadow=i.shadow)):i&&(o.icon=i)}o.address?(this.geocode({address:o.address},{markerId:t}),delete o.address,delete o.latitude,delete o.longitude,delete o.position):(o.latitude&&o.longitude||o.position)&&(o.position||(o.position=new google.maps.LatLng(o.latitude,o.longitude))),t.setOptions(o)},removeMarker:function(e){var o=s.inArray(e,this.markers),t;if(o>-1){this.tmpMarkers.splice(o,1),t=this.markers.splice(o,1);var i=t[0],e=s(this.mapId).data(i),a=s(this.mapId).data(i+"info");return e.setVisible(!1),e.setMap(null),s(this.mapId).removeData(i),a&&(a.close(),a.show=!1,s(this.mapId).removeData(i+"info")),!0}return!1},clearMarkers:function(){for(var e=0,o=this.markers.length;e<o;e++){var t=this.markers[e],i=s(this.mapId).data(t),a=s(this.mapId).data(t+"info");i.setVisible(!1),i.setMap(null),s(this.mapId).removeData(t),a&&(a.close(),a.show=!1,s(this.mapId).removeData(t+"info"))}this.singleMarker=!1,this.lockGeocode=!1,this.markers=[],this.tmpMarkers=[],this.geoMarkers=[]},clearMarkersDelay:function(){var e=this.markers;setTimeout(function(){for(var o=0,t=e.length;o<t;o++){var i=e[o],a=s(this.mapId).data(i),n=s(this.mapId).data(i+"info");a.setVisible(!1),a.setMap(null),s(this.mapId).removeData(i),n&&(n.close(),n.show=!1,s(this.mapId).removeData(i+"info"))}this.singleMarker=!1,this.lockGeocode=!1,this.markers=[],this.tmpMarkers=[],this.geoMarkers=[]},3e3)},isVisible:function(e){return this.map.getBounds().contains(e)}}})(jQuery)}window.gdLoadMap||M();
//# sourceMappingURL=goMap.js.map
