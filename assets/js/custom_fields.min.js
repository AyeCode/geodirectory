jQuery(document).ready(function(){jQuery(".gd-advanced-toggle").click(function(){setTimeout(function(){gd_toggle_switch_display()},100)});jQuery("#gd-form-builder-tab ul li a").click(function(){console.log(1);if(!jQuery(this).attr("id")){return}console.log(2);var type=jQuery(this).data("field-type");var type_key=jQuery(this).data("field-type-key");var custom_type=jQuery(this).data("field-custom-type");var post_type=jQuery("#new_post_type").val();var id="new"+jQuery(".field_row_main ul.core li:last").index();var manage_field_type=jQuery(".manage_field_type").val();var gd_nonce=jQuery("#gd_new_field_nonce").val();console.log(3);console.log(manage_field_type);if(manage_field_type=="general"||manage_field_type=="cpt-sorting"){if(manage_field_type=="general"){var action="geodir_get_custom_field_form"}else if(manage_field_type=="cpt-sorting"){var action="geodir_get_custom_field_sorting_form"}jQuery.get(ajaxurl+"?action="+action,{field_type:type,field_type_key:type_key,listing_type:post_type,field_id:id,field_ins_upd:"new",manage_field_type:manage_field_type,custom_type:custom_type,security:gd_nonce},function(data){if(jQuery(".field_row_main ul.core li").length>0){jQuery(".field_row_main ul.core").append(data)}else{jQuery(".field_row_main ul.core").html(data)}jQuery("#licontainer_"+id).find("#sort_order").val(parseInt(jQuery("#licontainer_"+id).index())+1);jQuery("select.geodir-select").trigger("geodir-select-init");jQuery("select.geodir-select-nostd").trigger("geodir-select-init");show_hide("field_frm"+id);jQuery("html, body").animate({scrollTop:jQuery("#licontainer_"+id).offset().top},1e3);gd_init_tooltips();gd_toggle_switch_display()});if(manage_field_type=="sorting_options"){jQuery(this).closest("li").hide()}}});jQuery(".field_row_main ul.core").sortable({opacity:.8,cursor:"move",placeholder:"ui-state-highlight",cancel:"input,label,select",update:function(){var manage_field_type=jQuery(".manage_field_type").val();var order=jQuery(this).sortable("serialize");if(manage_field_type=="general"){gd_order_custom_fields(order)}else if(manage_field_type=="cpt-sorting"){gd_order_custom_sort_fields(order)}}});gd_toggle_switch_display()});function gd_data_type_changed(obj,cont){if(obj&&cont){jQuery("#licontainer_"+cont).find(".decimal-point-wrapper").hide();if(jQuery(obj).val()=="FLOAT"){jQuery("#licontainer_"+cont).find(".decimal-point-wrapper").show()}if(jQuery(obj).val()=="FLOAT"||jQuery(obj).val()=="INT"){jQuery("#licontainer_"+cont).find(".gdcf-price-extra-set").show();if(jQuery("#licontainer_"+cont).find(".gdcf-price-extra-set input[name='extra[is_price]']:checked").val()=="1"){jQuery("#licontainer_"+cont).find(".gdcf-price-extra").show()}}else{jQuery("#licontainer_"+cont).find(".gdcf-price-extra-set").hide();jQuery("#licontainer_"+cont).find(".gdcf-price-extra").hide()}}}function gd_save_custom_field(id){if(jQuery("#licontainer_"+id+" #frontend_title").length>0){var frontend_title=jQuery("#licontainer_"+id+" #frontend_title").val();if(frontend_title==""){alert(geodir_all_js_msg.custom_field_not_blank_var);return false}}var fieldrequest=jQuery("#licontainer_"+id).find("select, textarea, input").serialize();var request_data="create_field=true&field_ins_upd=submit&"+fieldrequest;jQuery.ajax({url:ajaxurl+"?action=geodir_save_custom_field",type:"POST",data:request_data,success:function(result){var res=result;if(res.success==false){alert(res.data)}else{jQuery("#licontainer_"+id).replaceWith(jQuery.trim(result));var order=jQuery(".field_row_main ul.core").sortable("serialize")+"&update=update&manage_field_type=custom_fields";jQuery.get(ajaxurl+"?action=geodir_ajax_action&create_field=true",order,function(theResponse){});jQuery(".field_frm").hide()}jQuery("select.geodir-select").trigger("geodir-select-init");jQuery("select.geodir-select-nostd").trigger("geodir-select-init")}})}function show_hide(id){jQuery("#"+id).toggle()}function show_hide_radio(id,sh,cl){setTimeout(function(){gd_toggle_switch_display()},100)}function gd_delete_custom_field(id,nonce){var confarmation=confirm(geodir_all_js_msg.custom_field_delete);if(confarmation==true){if(id.substring(0,3)=="new"){jQuery("#licontainer_"+id).remove()}else{jQuery.get(ajaxurl+"?action=geodir_delete_custom_field",{field_id:id,field_ins_upd:"delete",security:nonce},function(data){var res=data;if(!res.success){alert(res.data)}else{jQuery("#licontainer_"+id).remove()}})}}}function gd_order_custom_fields(order){var gd_nonce=jQuery("#gd_new_field_nonce").val();order=order+"&security="+gd_nonce;jQuery.ajax({url:ajaxurl+"?action=geodir_order_custom_fields",type:"POST",data:order,success:function(result){if(result.success==false){alert(result.data)}}})}function gd_order_custom_sort_fields(order){var gd_nonce=jQuery("#gd_new_field_nonce").val();order=order+"&security="+gd_nonce;jQuery.ajax({url:ajaxurl+"?action=geodir_order_custom_sort_fields",type:"POST",data:order,success:function(result){if(result.success==false){alert(result.data)}}})}function gd_save_sort_field(id){var fieldrequest=jQuery("#licontainer_"+id).find("select, textarea, input").serialize();var request_data="create_field=true&field_ins_upd=submit&"+fieldrequest;jQuery.ajax({url:ajaxurl+"?action=geodir_save_custom_sort_field",type:"POST",data:request_data,success:function(result){jQuery("#licontainer_"+id).replaceWith(jQuery.trim(result));var order=jQuery(".field_row_main ul.core").sortable("serialize")+"&update=update&manage_field_type=sorting_options";jQuery("#licontainer_"+id).find('input[name="is_default"]').each(function(){if(jQuery(this).attr("checked")=="checked"){jQuery(".field_row_main").find('input[name="is_default"]').not(this).attr("checked",false)}});jQuery(".field_frm").hide()}})}function gd_delete_sort_field(id,nonce,obj){var confarmation=confirm(geodir_all_js_msg.custom_field_delete);if(confarmation==true){if(id.substring(0,3)=="new"){jQuery("#licontainer_"+id).remove()}else{jQuery.get(ajaxurl+"?action=geodir_delete_custom_sort_field",{field_id:id,_wpnonce:nonce},function(data){jQuery("#licontainer_"+id).remove();var field_type=jQuery(obj).closest("li").find("#field_type").val();var htmlvar_name=jQuery(obj).closest("li").find("#htmlvar_name").val();jQuery("#gd-"+field_type+"-_-"+htmlvar_name).closest("li").show()})}}}function gd_toggle_switch_display(){jQuery("[data-gdat-display-switch-set]").each(function(){var toggleClass=jQuery(this).data("gdat-display-switch-set");var switchValue=jQuery(this).find("input:checked").val();jQuery(this).parent().find("."+toggleClass).each(function(){if(jQuery(this).hasClass("gd-advanced-setting")){if(jQuery(this).hasClass("gda-show")&&switchValue==1){jQuery(this).show()}else{jQuery(this).hide()}}else{if(switchValue==1){jQuery(this).show()}else{jQuery(this).hide()}}})})}