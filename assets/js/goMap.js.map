{"version":3,"file":"goMap.js","sources":["../../resources/vendor/maps/goMap.js"],"sourcesContent":["/**\n * jQuery goMap\n *\n * @url        http://www.pittss.lv/jquery/gomap/\n * @author    Jevgenijs Shtrauss <pittss@gmail.com>\n * @version    1.3.2 2011.07.01\n * This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>\n */\nwindow.geodirJSGoMap = true;\nfunction geodirGoMapInit() {\n(function ($) {\n    if ((window.gdSetMap=='google' || window.gdSetMap=='auto') && window.google && typeof google.maps!=='undefined') {\n        gdMaps = 'google';\n    } else if ((window.gdSetMap=='osm' || window.gdSetMap=='auto') && typeof L!=='undefined' && typeof L.version!=='undefined') {\n        gdMaps = 'osm';\n    } else {\n        gdMaps = null;\n    }\n    window.gdMaps = window.gdMaps || gdMaps;\n\n\tif (window.gdMaps === 'google') {\n        console.log('Google Maps API Loaded :)');\n        jQuery('body').addClass('gd-google-maps');\n    } else if (window.gdMaps === 'osm') {\n        console.log('Leaflet | OpenStreetMap API Loaded :)');\n        jQuery('body').addClass('gd-osm-gmaps');\n    } else {\n        console.log('Maps API Not Loaded :(');\n        jQuery('body').addClass('gd-no-gmaps');\n    }\n    console.log(window.gdSetMap);\n    console.log(gdMaps);\n\n    var geocoder = window.gdMaps == 'google' && (typeof google !== 'undefined' && typeof google.maps !== 'undefined' && typeof google.maps.Geocoder !== 'undefined') ? new google.maps.Geocoder() : {};\n\n    function MyOverlay(map, $this) {\n        if (typeof $this !== 'undefined') {\n            $this.setMap(map);\n        } else {\n            this.setMap(map);\n        }\n    };\n    MyOverlay.prototype = window.gdMaps == 'google' && (typeof google !== 'undefined' && typeof google.maps !== 'undefined' && typeof google.maps.OverlayView !== 'undefined') ? new google.maps.OverlayView() : {};\n    MyOverlay.prototype.onAdd = function () {\n    };\n    MyOverlay.prototype.onRemove = function () {\n    };\n    MyOverlay.prototype.draw = function () {\n    };\n\n    $.goMap = {};\n\n    $.fn.goMap = function (options) {\n        return this.each(function () {\n            var goMap = $(this).data('goMap');\n            if (!goMap && window.gdMaps == 'google') {\n                var goMapBase = $.extend(true, {}, $.goMapBase);\n                $(this).data('goMap', goMapBase.init(this, options));\n                $.goMap = goMapBase;\n            } else if (!goMap && window.gdMaps == 'osm') {\n                var osmMapBase = $.extend(true, {}, $.osmMapBase);\n                $(this).data('goMap', osmMapBase.init(this, options));\n                $.goMap = osmMapBase;\n            } else {\n                $.goMap = goMap;\n            }\n        });\n    };\n\n    $.osmMapBase = {\n        defaults: {\n            address: '', // Street, City, Country\n            latitude: window.gdBaseLat ? window.gdBaseLat : 56.9,\n            longitude: window.gdBaseLng ? window.gdBaseLng : 24.1,\n            zoom: parseInt(window.gdBaseZoom) > 0 ? parseInt(window.gdBaseZoom) : 4,\n            delay: 200,\n            hideByClick: true,\n            oneInfoWindow: true,\n            prefixId: 'gomarker',\n            polyId: 'gopoly',\n            groupId: 'gogroup',\n            navigationControl: true, // Show or hide navigation control\n            navigationControlOptions: {\n                position: 'topleft', // TOP, TOP_LEFT, TOP_RIGHT, BOTTOM, BOTTOM_LEFT, BOTTOM_RIGHT, LEFT, RIGHT\n                style: 'DEFAULT' \t// DEFAULT, ANDROID, SMALL, ZOOM_PAN\n            },\n            mapTypeControl: true, // Show or hide map control\n            mapTypeControlOptions: {\n                position: 'topright', // TOP, TOP_LEFT, TOP_RIGHT, BOTTOM, BOTTOM_LEFT, BOTTOM_RIGHT, LEFT, RIGHT\n                style: 'DEFAULT'// DEFAULT, DROPDOWN_MENU, HORIZONTAL_BAR\n            },\n            zoomControl: true,\n            zoomControlOptions: {\n                position: 'topleft'\n            },\n            scaleControl: false, // Show or hide scale\n            scrollwheel: true, // Mouse scroll whell\n            fullscreenControl: false, // disable fullscreen button as we add our own\n            directions: false,\n            directionsResult: null,\n            disableDoubleClickZoom: false,\n            touchZoom: '*', // Boolean|String. Default: *. Whether the map can be zoomed by touch-dragging with two fingers.\n            streetViewControl: true,\n            maxClusterRadius: 80,\n            streetViewControlOptions: {\n                position: 'bottomleft'\n            },\n            markers: [],\n            overlays: [],\n            polyline: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2\n            },\n            polygon: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2,\n                fillColor: '#FF0000',\n                fillOpacity: 0.2\n            },\n            circle: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2,\n                fillColor: '#FF0000',\n                fillOpacity: 0.2\n            },\n            rectangle: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2,\n                fillColor: '#FF0000',\n                fillOpacity: 0.2\n            },\n            maptype: 'ROADMAP', // Map type - HYBRID, ROADMAP, SATELLITE, TERRAIN\n            html_prepend: '<div class=gomapMarker>',\n            html_append: '</div>',\n            addMarker: false,\n            osmBaseLayer: null,\n            osmOverlays: [],\n        },\n        map: null,\n        count: 0,\n        markers: [],\n        polylines: [],\n        polygons: [],\n        circles: [],\n        rectangles: [],\n        tmpMarkers: [],\n        geoMarkers: [],\n        lockGeocode: false,\n        bounds: null,\n        overlays: null,\n        overlay: null,\n        mapId: null,\n        plId: null,\n        pgId: null,\n        cId: null,\n        rId: null,\n        opts: null,\n        centerLatLng: null,\n\n        init: function (el, options) {\n            var opts = $.extend(true, {}, $.osmMapBase.defaults, options), baseLayer, customMap;\n            this.mapId = $(el);\n            this.opts = opts;\n\n            if (opts.address)\n                this.geocode({address: opts.address, center: true});\n            else if (Array.isArray(opts.markers) && opts.markers.length > 0) {\n                if (opts.markers[0].address)\n                    this.geocode({address: opts.markers[0].address, center: true});\n                else\n                    this.centerLatLng = L.latLng(opts.markers[0].latitude, opts.markers[0].longitude);\n            }\n            else\n                this.centerLatLng = L.latLng(opts.latitude, opts.longitude);\n\n            var myOptions = {\n                center: this.centerLatLng,\n                zoom: parseInt(opts.zoom),\n                minZoom: opts.minZoom ? opts.minZoom : 1,\n                maxZoom: opts.maxZoom > 18 ? 18 : opts.maxZoom,\n                zoomControl: opts.zoomControl === \"0\" || !opts.zoomControl ? false : true,\n                touchZoom: opts.touchZoom,\n                doubleClickZoom: opts.disableDoubleClickZoom === \"0\" || !opts.disableDoubleClickZoom ? true : false,\n                dragging: typeof opts.dragging !== 'undefined' ? opts.dragging : !L.Browser.mobile,\n                tap: typeof opts.dragging !== 'undefined' ? opts.dragging : !L.Browser.mobile,\n                worldCopyJump: true,\n                scrollWheelZoom: opts.scrollwheel === \"0\" || !opts.scrollwheel ? false : opts.scrollwheel,\n                attributionControl: typeof opts.attributionControl !== 'undefined' ? opts.attributionControl : true,\n                defaultBaseLayer: typeof opts.osmBaseLayer !== 'undefined' && opts.osmBaseLayer ? opts.osmBaseLayer : null,\n                defaultOverlays: typeof opts.osmOverlays !== 'undefined' && opts.osmOverlays ? opts.osmOverlays : [],\n            }\n\n            if (myOptions.defaultBaseLayer) {\n                try {\n                    baseLayer = L.tileLayer.provider(myOptions.defaultBaseLayer);\n                    if (baseLayer && baseLayer._url && baseLayer._url.indexOf('apikey=') === -1 && !(baseLayer.options && baseLayer.options.apiKey)) {\n                        var apikey = typeof opts.osmApiKey !== 'undefined' && opts.osmApiKey ? opts.osmApiKey : '5e8a41b90fc240c09f61eb6bbbfb8395';\n                        baseLayer._url += (baseLayer._url.indexOf(\"?\") === -1 ? '?' : \"&\") + \"apikey=\" + apikey;\n                    }\n                    customMap = true;\n                } catch(e) {\n                    console.log(e);\n                }\n            }\n\n            if (!baseLayer) {\n                var osmUrl = '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n                osmAttrib = 'Map data &copy; <a href=\"https://openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n                baseLayer = L.tileLayer(osmUrl, {maxZoom: opts.maxZoom, attribution: osmAttrib});\n            }\n\n            this.map = new L.Map(el, myOptions).addLayer(baseLayer);\n\n            if (customMap && myOptions.defaultOverlays && myOptions.defaultOverlays.length > 0) {\n                for (var i in myOptions.defaultOverlays) {\n                    if (myOptions.defaultOverlays[i]) {\n                        try {\n                            L.tileLayer.provider(myOptions.defaultOverlays[i]).addTo(this.map);\n                        } catch(e) {\n                            console.log(e);\n                        }\n                    }\n                }\n            }\n\n            if (myOptions.zoomControl && (zoomPosition = this.parsePosition(opts.zoomControlOptions.position, 'topleft')) !== 'topleft') {\n                this.map.zoomControl.setPosition(zoomPosition);\n            }\n\n            if (parseInt(options.marker_cluster) === 1 && !options.marker_cluster_server) {\n                jQuery('#gdOSMprogress').remove();\n                jQuery('#gdOSMprogressBar').remove();\n                jQuery(el).before('<div id=\"gdOSMprogress\"><div id=\"gdOSMprogressBar\"></div></div>');\n\n                function gdOSMUpdateProgressBar(processed, total, elapsed, layersArray) {\n                    processed = Math.min(processed, total);\n                    if (elapsed > 1000) {\n                        // if it takes more than a second to load, display the progress bar:\n                        jQuery('#gdOSMprogress').show();\n                        jQuery('#gdOSMprogressBar').width(Math.round(processed/total * 100) + '%');\n                    }\n\n                    if (processed === total) {\n                        // all markers processed - hide the progress bar:\n                        jQuery('#gdOSMprogress').hide();\n                    }\n                }\n                this.gdlayers = new L.markerClusterGroup({spiderfyOnMaxZoom: true, showCoverageOnHover: false, zoomToBoundsOnClick: true, chunkedLoading: true, maxClusterRadius: (parseInt(opts.maxClusterRadius) > 0 ? parseInt(opts.maxClusterRadius) : 80), chunkProgress: gdOSMUpdateProgressBar});\n            } else {\n                this.gdlayers = new L.featureGroup([]);\n            }\n\n            // Overlapping Marker Spiderfier LeafLet\n\t\t\ttry {\n\t\t\t\tthis.oms = new OverlappingMarkerSpiderfier(this.map);\n\t\t\t} catch(e){\n\t\t\t}\n\n            for (var j = 0, l = opts.markers.length; j < l; j++)\n                this.createMarker(opts.markers[j]);\n\n            var goMap = this;\n\n            if (opts.addMarker == true || opts.addMarker == 'multi') {\n                L.DomEvent.addListener(goMap.map, 'click', function (event) {\n                    var options = {\n                        position: event.latLng,\n                        draggable: true\n                    };\n\n                    var marker = goMap.createMarker(options);\n\n                    L.DomEvent.addListener(marker, 'dblclick', function (event) {\n                        marker.setMap(null);\n                        goMap.removeMarker(marker.id);\n                    });\n\n                });\n            }\n            else if (opts.addMarker == 'single') {\n                L.DomEvent.addListener(goMap.map, 'click', function (event) {\n                    if (!goMap.singleMarker) {\n                        var options = {\n                            position: event.latLng,\n                            draggable: true\n                        };\n\n                        var marker = goMap.createMarker(options);\n                        goMap.singleMarker = true;\n\n                        L.DomEvent.addListener(marker, 'dblclick', function (event) {\n                            marker.setMap(null);\n                            goMap.removeMarker(marker.id);\n                            goMap.singleMarker = false;\n                        });\n                    }\n                });\n            }\n\n            delete opts.markers;\n            delete opts.overlays;\n\n            return this;\n        },\n\n        ready: function (f) {\n            this.map.addOneTimeEventListener('moveend', function () {\n                return f();\n            });\n        },\n\n        Geocoder: function (options) {\n            return new L.Control.gdGeoCode({\n                provider: new L.gdGeoCode.Provider.OpenStreetMap()\n            });\n        },\n\n        geocode: function (address, options) {\n            var gdcoder = new L.Control.gdGeoCode({ provider: new L.gdGeoCode.Provider.OpenStreetMap() });\n            var results = gdcoder.geosearch(address);\n        },\n\n        parsePosition: function (position, $default) {\n            var parsed = position;\n            if (position && typeof position == 'string') {\n                switch(position.toUpperCase()) {\n                    case 'TOP':\n                    case 'LEFT':\n                    case 'TOP_LEFT':\n                    case 'topleft':\n                        parsed = 'topleft';\n                    break;\n                    case 'RIGHT':\n                    case 'TOP_RIGHT':\n                    case 'topright':\n                        parsed = 'topright';\n                    break;\n                    case 'BOTTOM':\n                    case 'BOTTOM_LEFT':\n                    case 'bottomleft':\n                        parsed = 'bottomleft';\n                    break;\n                    case 'BOTTOM_RIGHT':\n                    case 'bottomright':\n                        parsed = 'bottomright';\n                    break;\n                    default:\n                        parsed = typeof $default !== 'undefined' ? $default : parsed;\n                    break;\n                }\n            } else if (typeof $default !== 'undefined') {\n                parsed = $default;\n            }\n\n            return parsed;\n        },\n\n        geoMarker: function () {\n            if (this.geoMarkers.length > 0 && !this.lockGeocode) {\n                this.lockGeocode = true;\n                var current = this.geoMarkers.splice(0, 1);\n                this.geocode({address: current[0].address}, current[0]);\n            }\n            else if (this.lockGeocode) {\n                var goMap = this;\n                setTimeout(function () {\n                    goMap.geoMarker();\n                }, this.opts.delay);\n            }\n        },\n\n        setMap: function (options) {\n            delete options.mapTypeId;\n\n            if (options.address) {\n                this.geocode({address: options.address, center: true});\n                delete options.address;\n            }\n            else if (options.latitude && options.longitude) {\n                options.center = L.latLng(options.latitude, options.longitude);\n                delete options.longitude;\n                delete options.latitude;\n            }\n\n            if (options.mapTypeControlOptions && options.mapTypeControlOptions.position)\n                options.mapTypeControlOptions.position = options.mapTypeControlOptions.position.toLowerCase();\n\n            if (options.navigationControlOptions && options.navigationControlOptions.position)\n                options.navigationControlOptions.position = options.navigationControlOptions.position.toLowerCase();\n\n            L.Util.setOptions(this.map, options);\n        },\n\n        getMap: function () {\n            return this.map;\n        },\n\n        setInfoWindow: function (marker, html) {\n            var goMap = this;\n            html.content = goMap.opts.html_prepend + html.content + goMap.opts.html_append;\n            var infowindow = marker.bindPopup(html);\n            infowindow.show = false;\n\n            $(goMap.mapId).data(marker.id + 'info', infowindow);\n\n            if (html.popup) {\n                goMap.openWindow(infowindow, marker, html);\n                infowindow.show = true;\n            }\n\n            L.DomEvent.addListener(marker, 'click', function () {\n                if (infowindow.show && goMap.opts.hideByClick) {\n                    infowindow.close();\n                    infowindow.show = false;\n                }\n                else {\n                    goMap.openWindow(infowindow, marker, html);\n                    infowindow.show = true;\n                }\n            });\n        },\n\n        openWindow: function (infowindow, marker, html) {\n            if (this.opts.oneInfoWindow)\n                this.clearInfo();\n\n            if (html.ajax) {\n                infowindow.openPopup();\n                $.ajax({\n                    url: html.ajax,\n                    success: function (html) {\n                        infowindow.setContent(html);\n                    }\n                });\n            } else if (html.id) {\n                infowindow.setContent($(html.id).html());\n                infowindow.openPopup();\n            } else {\n                infowindow.openPopup();\n            }\n        },\n\n        setInfo: function (id, text) {\n            var info = $(this.mapId).data(id + 'info');\n\n            if (typeof text == 'object')\n                info.setOptions(text);\n            else\n                info.setContent(text);\n        },\n\n        getInfo: function (id, hideDiv) {\n            var info = $(this.mapId).data(id + 'info').getContent();\n            if (hideDiv)\n                return $(info).html();\n            else\n                return info;\n        },\n\n        clearInfo: function () {\n            for (var i = 0, l = this.markers.length; i < l; i++) {\n                var info = $(this.mapId).data(this.markers[i] + 'info');\n                if (info) {\n                    info.popupclose();\n                    info.show = false;\n                }\n            }\n        },\n\n        fitBounds: function (type, markers) {\n            var goMap = this;\n            if (this.getMarkerCount() != this.getTmpMarkerCount())\n                setTimeout(function () {\n                    goMap.fitBounds(type, markers);\n                }, this.opts.delay);\n            else {\n                this.bounds = new L.LatLngBounds([]);\n\n                if (!type || (type && type == 'all')) {\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        this.bounds.extend($(this.mapId).data(this.markers[i]).position);\n                    }\n                }\n                else if (type && type == 'visible') {\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        if (this.getVisibleMarker(this.markers[i]))\n                            this.bounds.extend($(this.mapId).data(this.markers[i]).position);\n                    }\n\n                }\n                else if (type && type == 'markers' && Array.isArray(markers)) {\n                    for (var i = 0, l = markers.length; i < l; i++) {\n                        this.bounds.extend($(this.mapId).data(markers[i]).position);\n                    }\n                }\n                this.map.fitBounds(this.bounds);\n            }\n        },\n\n        getBounds: function () {\n            return this.map.getBounds();\n        },\n\n        getGDMarkers: function () {\n            return this.gdlayers;\n        },\n\n        getMarkerCount: function () {\n            return this.markers.length;\n        },\n\n        getTmpMarkerCount: function () {\n            return this.tmpMarkers.length;\n        },\n\n        getMarkers: function (type, name) {\n            var array = [];\n            switch (type) {\n                case \"markers\":\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        var temp = $(this.mapId).data(this.markers[i]);\n                        array.push(temp);\n                    }\n                    break;\n                default:\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        var temp = $(this.mapId).data(this.markers[i]).getPosition().toUrlValue();\n                        array.push(temp);\n                    }\n                    break;\n            }\n            return array;\n        },\n\n        createMarker: function (marker) {\n            if (!marker.geocode) {\n                this.count++;\n                if (!marker.id)\n                    marker.id = this.opts.prefixId + this.count;\n                this.tmpMarkers.push(marker.id);\n            }\n            if (marker.address && !marker.geocode) {\n                this.geoMarkers.push(marker);\n                this.geoMarker();\n            } else if (marker.latitude && marker.longitude || marker.position) {\n                var options = {map: this.map};\n                options.id = marker.id;\n                options.group = marker.group ? marker.group : this.opts.groupId;\n                options.zIndex = marker.zIndex ? marker.zIndex : 0;\n                options.zIndexOrg = marker.zIndexOrg ? marker.zIndexOrg : 0;\n\n                if (marker.visible == false)\n                    options.visible = marker.visible;\n\n                if (marker.title)\n                    options.title = marker.title;\n\n                if (marker.alt)\n                    options.alt = marker.alt;\n\n                if (marker.label)\n                    options.label = marker.label;\n\n                if (marker.draggable)\n                    options.draggable = marker.draggable;\n\n                if (marker.icon && marker.icon.image) {\n                    options.icon = marker.icon.image;\n                    if (marker.icon.shadow)\n                        options.shadow = marker.icon.shadow;\n                }\n                else if (marker.icon)\n                    options.icon = marker.icon;\n\n                else if (this.opts.icon && this.opts.icon.image) {\n                    options.icon = this.opts.icon.image;\n                    if (this.opts.icon.shadow)\n                        options.shadow = this.opts.icon.shadow;\n                }\n                else if (this.opts.icon)\n                    options.icon = this.opts.icon;\n\n                if (options.icon) {\n                    iconOptions = {\n                        iconUrl: options.icon,\n                        iconSize: null,\n                        iconAnchor: [17, 0],\n                        popupAnchor: null,\n                    }\n                    if (marker.iconSize) {\n                        iconOptions.iconSize = marker.iconSize;\n                    }\n                    if (marker.iconAnchor) {\n                        iconOptions.iconAnchor = marker.iconAnchor;\n                    }\n                    if (marker.popupAnchor) {\n                        iconOptions.popupAnchor = marker.popupAnchor;\n                    }\n                    if (marker.iconRetinaUrl) {\n                        iconOptions.iconRetinaUrl = marker.iconRetinaUrl;\n                    }\n                    if (marker.shadowUrl) {\n                        iconOptions.shadowUrl = marker.shadowUrl;\n                    }\n                    if (marker.shadowRetinaUrl) {\n                        iconOptions.shadowRetinaUrl = marker.shadowRetinaUrl;\n                    }\n                    if (marker.shadowSize) {\n                        iconOptions.shadowSize = marker.shadowSize;\n                    }\n                    if (marker.shadowAnchor) {\n                        iconOptions.shadowAnchor = marker.shadowAnchor;\n                    }\n                    if (marker.className) {\n                        iconOptions.className = marker.className;\n                    }\n\n                    if (marker.clustered) {\n                        options.clustered = true;\n                        var c = 'marker-cluster marker-cluster-';\n\n                        if (marker.title < 10) {\n                            c += 'small';\n                        } else if (marker.title < 100) {\n                            c += 'medium';\n                        } else {\n                            c += 'large';\n                        }\n                        iconOptions.className = c;\n                        iconOptions.html = '<div><span>' + marker.title + '</span></div>';\n                        marker.w = 40;\n                        marker.h = 40;\n                    }\n\n                    if (!iconOptions.iconSize && marker.w && marker.h && parseInt(marker.w) > 0 && parseInt(marker.h) > 0) {\n                        var w = parseFloat(marker.w);\n                        var h = parseFloat(marker.h);\n                        iconOptions.iconSize = [w, h];\n                        iconOptions.iconAnchor = [((w / 2) - 1), h];\n                        iconOptions.popupAnchor = [0, (h * -1) + (h * 0.05)];\n                    }\n\n                    if (marker.clustered) {\n                        options.icon = new L.DivIcon(iconOptions);\n                    } else {\n                        options.icon = L.icon(iconOptions);\n                    }\n\n                } else {\n                    options.icon = new L.Icon.Default();\n                }\n\n                options.position = marker.position ? marker.position : L.latLng(marker.latitude, marker.longitude);\n\n                var cmarker = new L.Marker(options.position, options);\n\n                if (marker.html && !marker.clustered) {\n                    if (!marker.html.content && !marker.html.ajax && !marker.html.id)\n                        marker.html = {content: marker.html};\n                    else if (!marker.html.content)\n                        marker.html.content = null;\n\n                    this.setInfoWindow(cmarker, marker.html);\n                }\n                if (marker.addToMap) {\n                    cmarker.addTo(this.map);\n                    return cmarker;\n                }\n                this.addMarker(cmarker);\n                return cmarker;\n            }\n        },\n\n        addMarker: function (marker) {\n            this.gdlayers.addLayer(marker);\n        },\n\n        removeMarker: function (marker) {\n            if (marker== 'map_me') {\n                if (jQuery.goMap.gdUmarker) {\n                    this.map.removeLayer(jQuery.goMap.gdUmarker);\n                    jQuery.goMap.gdUmarker = null;\n                }\n                return true;\n            }\n\n            var index = $.inArray(marker, this.markers), current;\n            if (index > -1) {\n                this.tmpMarkers.splice(index, 1);\n                current = this.markers.splice(index, 1);\n                var markerId = current[0];\n                var marker = $(this.mapId).data(markerId);\n                var info = $(this.mapId).data(markerId + 'info');\n\n                marker.setVisible(false);\n                marker.setMap(null);\n                $(this.mapId).removeData(markerId);\n\n                if (info) {\n                    info.close();\n                    info.show = false;\n                    $(this.mapId).removeData(markerId + 'info');\n                }\n                return true;\n            }\n            return false;\n        },\n\n        clearMarkers: function () {\n            var allMarkers = this.gdlayers;\n            this.gdlayers.eachLayer(function(marker) {\n                allMarkers.removeLayer(marker);\n            });\n            this.gdlayers = allMarkers;\n\n            this.singleMarker = false;\n            this.lockGeocode = false;\n            this.markers = [];\n            this.tmpMarkers = [];\n            this.geoMarkers = [];\n        },\n\n        isVisible: function (latlng) {\n            return this.map.getBounds().contains(latlng);\n        }\n    }\n\n    $.goMapBase = {\n        defaults: {\n            address: '', // Street, City, Country\n            latitude: window.gdBaseLat ? window.gdBaseLat : 56.9,\n            longitude: window.gdBaseLng ? window.gdBaseLng : 24.1,\n            zoom: parseInt(window.gdBaseZoom) > 0 ? parseInt(window.gdBaseZoom) : 4,\n            delay: 200,\n            hideByClick: true,\n            oneInfoWindow: true,\n            prefixId: 'gomarker',\n            polyId: 'gopoly',\n            groupId: 'gogroup',\n            navigationControl: true, // Show or hide navigation control\n            navigationControlOptions: {\n                position: 'TOP_LEFT', // TOP, TOP_LEFT, TOP_RIGHT, BOTTOM, BOTTOM_LEFT, BOTTOM_RIGHT, LEFT, RIGHT\n                style: 'DEFAULT' \t// DEFAULT, ANDROID, SMALL, ZOOM_PAN\n            },\n            mapTypeControl: true, // Show or hide map control\n            mapTypeControlOptions: {\n                position: 'TOP_RIGHT', // TOP, TOP_LEFT, TOP_RIGHT, BOTTOM, BOTTOM_LEFT, BOTTOM_RIGHT, LEFT, RIGHT\n                style: 'DEFAULT'// DEFAULT, DROPDOWN_MENU, HORIZONTAL_BAR\n            },\n            zoomControl: true,\n            zoomControlOptions: {\n                position: 'LEFT_CENTER'\n            },\n            cameraControl: false,\n            cameraControlOptions: {\n                position: 'LEFT_CENTER'\n            },\n            scaleControl: false, // Show or hide scale\n            scrollwheel: true, // Mouse scroll whell\n            fullscreenControl: false, // disable fullscreen button as we add our own\n            directions: false,\n            directionsResult: null,\n            disableDoubleClickZoom: false,\n            streetViewControl: true,\n            clickableIcons: true, // When false, map icons are not clickable. A map icon represents a point of interest, also known as a POI.\n            streetViewControlOptions: {\n                position: 'LEFT_CENTER'\n            },\n            markers: [],\n            overlays: [],\n            polyline: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2\n            },\n            polygon: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2,\n                fillColor: '#FF0000',\n                fillOpacity: 0.2\n            },\n            circle: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2,\n                fillColor: '#FF0000',\n                fillOpacity: 0.2\n            },\n            rectangle: {\n                color: '#FF0000',\n                opacity: 1.0,\n                weight: 2,\n                fillColor: '#FF0000',\n                fillOpacity: 0.2\n            },\n            maptype: 'ROADMAP', // Map type - HYBRID, ROADMAP, SATELLITE, TERRAIN\n            html_prepend: '<div class=gomapMarker>',\n            html_append: '</div>',\n            addMarker: false\n        },\n        map: null,\n        count: 0,\n        markers: [],\n        polylines: [],\n        polygons: [],\n        circles: [],\n        rectangles: [],\n        tmpMarkers: [],\n        geoMarkers: [],\n        lockGeocode: false,\n        bounds: null,\n        overlays: null,\n        overlay: null,\n        mapId: null,\n        plId: null,\n        pgId: null,\n        cId: null,\n        rId: null,\n        opts: null,\n        centerLatLng: null,\n\n        init: function (el, options) {\n            var opts = $.extend(true, {}, $.goMapBase.defaults, options);\n            this.mapId = $(el);\n            this.opts = opts;\n\n            if (opts.address)\n                this.geocode({address: opts.address, center: true});\n//\t\t\telse if (opts.latitude != $.goMapBase.defaults.latitude && opts.longitude != $.goMapBase.defaults.longitude)\n//\t\t\t\tthis.centerLatLng = new google.maps.LatLng(opts.latitude, opts.longitude);\n            else if (Array.isArray(opts.markers) && opts.markers.length > 0) {\n                if (opts.markers[0].address)\n                    this.geocode({address: opts.markers[0].address, center: true});\n                else\n                    this.centerLatLng = new google.maps.LatLng(opts.markers[0].latitude, opts.markers[0].longitude);\n            }\n            else\n                this.centerLatLng = new google.maps.LatLng(opts.latitude, opts.longitude);\n\n            var myOptions = {\n                center: this.centerLatLng,\n                disableDoubleClickZoom: (opts.disableDoubleClickZoom === \"0\" || !opts.disableDoubleClickZoom ? false : true),\n                mapTypeControl: (opts.mapTypeControl === \"0\" || !opts.mapTypeControl ? false : true),\n                streetViewControl: (opts.streetViewControl === \"0\" || !opts.streetViewControl ? false : true),\n                streetViewControlOptions: {\n                    position: google.maps.ControlPosition[opts.streetViewControlOptions.position.toUpperCase()]\n                },\n                mapTypeControlOptions: {\n                    position: google.maps.ControlPosition[opts.mapTypeControlOptions.position.toUpperCase()],\n                    style: google.maps.MapTypeControlStyle[opts.mapTypeControlOptions.style.toUpperCase()]\n                },\n                mapTypeId: google.maps.MapTypeId[opts.maptype.toUpperCase()],\n                navigationControl: opts.navigationControl,\n                navigationControlOptions: {\n                    position: google.maps.ControlPosition[opts.navigationControlOptions.position.toUpperCase()],\n                    style: google.maps.NavigationControlStyle[opts.navigationControlOptions.style.toUpperCase()]\n                },\n                zoomControl: (opts.zoomControl === \"0\" || !opts.zoomControl ? false : true),\n                zoomControlOptions: {\n                    position: google.maps.ControlPosition[opts.zoomControlOptions.position.toUpperCase()]\n                },\n                cameraControl: (opts.cameraControl === \"0\" || !opts.cameraControl ? false : true),\n                cameraControlOptions: {\n                    position: google.maps.ControlPosition[opts.cameraControlOptions.position.toUpperCase()]\n                },\n                scaleControl: (opts.scaleControl === \"0\" || !opts.scaleControl ? false : true),\n                scrollwheel: (opts.scrollwheel === \"0\" || !opts.scrollwheel ? false : true),\n                fullscreenControl: (opts.fullscreenControl === \"0\" || !opts.fullscreenControl ? false : true),\n                zoom: parseInt(opts.zoom),\n                minZoom: (opts.minZoom ? parseInt(opts.minZoom) : 0),\n                maxZoom: parseInt(opts.maxZoom),\n                clickableIcons: (opts.clickableIcons === \"0\" || !opts.clickableIcons ? false : true)\n            };\n\n            this.map = new google.maps.Map(el, myOptions);\n            this.overlay = new MyOverlay(this.map);\n\n            // Overlapping Marker Spiderfier\n\t\t\ttry {\n\t\t\t\tthis.oms = new OverlappingMarkerSpiderfier(this.map, {\n\t\t\t\t\tmarkersWontMove: true,   // we promise not to move any markers, allowing optimizations\n\t\t\t\t\tmarkersWontHide: true,   // we promise not to change visibility of any markers, allowing optimizations\n\t\t\t\t\tbasicFormatEvents: true  // allow the library to skip calculating advanced formatting information\n\t\t\t\t});\n\t\t\t} catch(e) {\n\t\t\t}\n\n            this.overlays = {\n                polyline: {id: 'plId', array: 'polylines', create: 'createPolyline'},\n                polygon: {id: 'pgId', array: 'polygons', create: 'createPolygon'},\n                circle: {id: 'cId', array: 'circles', create: 'createCircle'},\n                rectangle: {id: 'rId', array: 'rectangles', create: 'createRectangle'}\n            };\n\n            this.plId = $('<div style=\"display:none;\"/>').appendTo(this.mapId);\n            this.pgId = $('<div style=\"display:none;\"/>').appendTo(this.mapId);\n            this.cId = $('<div style=\"display:none;\"/>').appendTo(this.mapId);\n            this.rId = $('<div style=\"display:none;\"/>').appendTo(this.mapId);\n\n            for (var j = 0, l = opts.markers.length; j < l; j++)\n                this.createMarker(opts.markers[j]);\n\n            for (var j = 0, l = opts.overlays.length; j < l; j++)\n                this[this.overlays[opts.overlays[j].type].create](opts.overlays[j]);\n\n            var goMap = this;\n            if (opts.addMarker == true || opts.addMarker == 'multi') {\n                google.maps.event.addListener(goMap.map, 'click', function (event) {\n                    var options = {\n                        position: event.latLng,\n                        draggable: true\n                    };\n\n                    var marker = goMap.createMarker(options);\n\n                    google.maps.event.addListener(marker, 'dblclick', function (event) {\n                        marker.setMap(null);\n                        goMap.removeMarker(marker.id);\n                    });\n\n                });\n            }\n            else if (opts.addMarker == 'single') {\n                google.maps.event.addListener(goMap.map, 'click', function (event) {\n                    if (!goMap.singleMarker) {\n                        var options = {\n                            position: event.latLng,\n                            draggable: true\n                        };\n\n                        var marker = goMap.createMarker(options);\n                        goMap.singleMarker = true;\n\n                        google.maps.event.addListener(marker, 'dblclick', function (event) {\n                            marker.setMap(null);\n                            goMap.removeMarker(marker.id);\n                            goMap.singleMarker = false;\n                        });\n                    }\n                });\n            }\n            delete opts.markers;\n            delete opts.overlays;\n\n            return this;\n        },\n\n        ready: function (f) {\n            google.maps.event.addListenerOnce(this.map, 'bounds_changed', function () {\n                return f();\n            });\n        },\n\n        geocode: function (address, options) {\n            var goMap = this;\n            setTimeout(function () {\n                geocoder.geocode({'address': address.address}, function (results, status) {\n                    if (status == google.maps.GeocoderStatus.OK && address.center)\n                        goMap.map.setCenter(results[0].geometry.location);\n\n                    if (status == google.maps.GeocoderStatus.OK && options && options.markerId)\n                        options.markerId.setPosition(results[0].geometry.location);\n\n                    else if (status == google.maps.GeocoderStatus.OK && options) {\n                        if (goMap.lockGeocode) {\n                            goMap.lockGeocode = false;\n                            options.position = results[0].geometry.location;\n                            options.geocode = true;\n                            goMap.createMarker(options);\n                        }\n                    }\n                    else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {\n                        goMap.geocode(address, options);\n                    }\n                });\n            }, this.opts.delay);\n        },\n\n        geoMarker: function () {\n            if (this.geoMarkers.length > 0 && !this.lockGeocode) {\n                this.lockGeocode = true;\n                var current = this.geoMarkers.splice(0, 1);\n                this.geocode({address: current[0].address}, current[0]);\n            }\n            else if (this.lockGeocode) {\n                var goMap = this;\n                setTimeout(function () {\n                    goMap.geoMarker();\n                }, this.opts.delay);\n            }\n        },\n\n        setMap: function (options) {\n            delete options.mapTypeId;\n\n            if (options.address) {\n                this.geocode({address: options.address, center: true});\n                delete options.address;\n            }\n            else if (options.latitude && options.longitude) {\n                options.center = new google.maps.LatLng(options.latitude, options.longitude);\n                delete options.longitude;\n                delete options.latitude;\n            }\n\n            if (options.mapTypeControlOptions && options.mapTypeControlOptions.position)\n                options.mapTypeControlOptions.position = google.maps.ControlPosition[options.mapTypeControlOptions.position.toUpperCase()];\n\n            if (options.mapTypeControlOptions && options.mapTypeControlOptions.style)\n                options.mapTypeControlOptions.style = google.maps.MapTypeControlStyle[options.mapTypeControlOptions.style.toUpperCase()];\n\n            if (options.navigationControlOptions && options.navigationControlOptions.position)\n                options.navigationControlOptions.position = google.maps.ControlPosition[options.navigationControlOptions.position.toUpperCase()];\n\n            if (options.navigationControlOptions && options.navigationControlOptions.style)\n                options.navigationControlOptions.style = google.maps.NavigationControlStyle[options.navigationControlOptions.style.toUpperCase()];\n\n            this.map.setOptions(options);\n        },\n\n        getMap: function () {\n            return this.map;\n        },\n\n        createListener: function (type, event, data) {\n            var target;\n\n            if (typeof type != 'object')\n                type = {type: type};\n\n            if (type.type == 'map')\n                target = this.map;\n            else if (type.type == 'marker' && type.marker)\n                target = $(this.mapId).data(type.marker);\n            else if (type.type == 'info' && type.marker)\n                target = $(this.mapId).data(type.marker + 'info');\n\n            if (target)\n                return google.maps.event.addListener(target, event, data);\n            else if ((type.type == 'marker' || type.type == 'info') && this.getMarkerCount() != this.getTmpMarkerCount())\n                var goMap = this;\n            setTimeout(function () {\n                goMap.createListener(type, event, data);\n            }, this.opts.delay);\n        },\n\n        removeListener: function (listener) {\n            google.maps.event.removeListener(listener);\n        },\n\n        setInfoWindow: function (marker, html) {\n            var goMap = this;\n            html.content = goMap.opts.html_prepend + html.content + goMap.opts.html_append;\n            var infowindow = new google.maps.InfoWindow(html);\n            infowindow.show = false;\n\n            $(goMap.mapId).data(marker.id + 'info', infowindow);\n\n            if (html.popup) {\n                goMap.openWindow(infowindow, marker, html);\n                infowindow.show = true;\n            }\n\n            google.maps.event.addListener(marker, 'click', function () {\n                if (infowindow.show && goMap.opts.hideByClick) {\n                    infowindow.close();\n                    infowindow.show = false;\n                }\n                else {\n                    goMap.openWindow(infowindow, marker, html);\n                    infowindow.show = true;\n                }\n            });\n        },\n\n        openWindow: function (infowindow, marker, html) {\n            if (this.opts.oneInfoWindow)\n                this.clearInfo();\n\n            if (html.ajax) {\n                infowindow.open(this.map, marker);\n                $.ajax({\n                    url: html.ajax,\n                    success: function (html) {\n                        infowindow.setContent(html);\n                    }\n                });\n            }\n            else if (html.id) {\n                infowindow.setContent($(html.id).html());\n                infowindow.open(this.map, marker);\n            }\n            else\n                infowindow.open(this.map, marker);\n        },\n\n        setInfo: function (id, text) {\n            var info = $(this.mapId).data(id + 'info');\n\n            if (typeof text == 'object')\n                info.setOptions(text);\n            else\n                info.setContent(text);\n        },\n\n        getInfo: function (id, hideDiv) {\n            var info = $(this.mapId).data(id + 'info').getContent();\n            if (hideDiv)\n                return $(info).html();\n            else\n                return info;\n        },\n\n        clearInfo: function () {\n            for (var i = 0, l = this.markers.length; i < l; i++) {\n                var info = $(this.mapId).data(this.markers[i] + 'info');\n                if (info) {\n                    info.close();\n                    info.show = false;\n                }\n            }\n        },\n\n        fitBounds: function (type, markers) {\n            var goMap = this;\n            if (this.getMarkerCount() != this.getTmpMarkerCount())\n                setTimeout(function () {\n                    goMap.fitBounds(type, markers);\n                }, this.opts.delay);\n            else {\n                this.bounds = new google.maps.LatLngBounds();\n\n                if (!type || (type && type == 'all')) {\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        this.bounds.extend($(this.mapId).data(this.markers[i]).position);\n                    }\n                }\n                else if (type && type == 'visible') {\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        if (this.getVisibleMarker(this.markers[i]))\n                            this.bounds.extend($(this.mapId).data(this.markers[i]).position);\n                    }\n\n                }\n                else if (type && type == 'markers' && Array.isArray(markers)) {\n                    for (var i = 0, l = markers.length; i < l; i++) {\n                        this.bounds.extend($(this.mapId).data(markers[i]).position);\n                    }\n                }\n                this.map.fitBounds(this.bounds);\n            }\n        },\n\n        getBounds: function () {\n            return this.map.getBounds();\n        },\n\n        createPolyline: function (poly) {\n            poly.type = 'polyline';\n            return this.createOverlay(poly);\n        },\n\n        createPolygon: function (poly) {\n            poly.type = 'polygon';\n            return this.createOverlay(poly);\n        },\n\n        createCircle: function (poly) {\n            poly.type = 'circle';\n            return this.createOverlay(poly);\n        },\n\n        createRectangle: function (poly) {\n            poly.type = 'rectangle';\n            return this.createOverlay(poly);\n        },\n\n        createOverlay: function (poly) {\n            var overlay = [];\n            if (!poly.id) {\n                this.count++;\n                poly.id = this.opts.polyId + this.count;\n            }\n            switch (poly.type) {\n                case 'polyline':\n                    if (poly.coords.length > 0) {\n                        for (var j = 0, l = poly.coords.length; j < l; j++)\n                            overlay.push(new google.maps.LatLng(poly.coords[j].latitude, poly.coords[j].longitude));\n\n                        overlay = new google.maps.Polyline({\n                            map: this.map,\n                            path: overlay,\n                            strokeColor: poly.color ? poly.color : this.opts.polyline.color,\n                            strokeOpacity: poly.opacity ? poly.opacity : this.opts.polyline.opacity,\n                            strokeWeight: poly.weight ? poly.weight : this.opts.polyline.weight\n                        });\n                    }\n                    else\n                        return false;\n                    break;\n                case 'polygon':\n                    if (poly.coords.length > 0) {\n                        for (var j = 0, l = poly.coords.length; j < l; j++)\n                            overlay.push(new google.maps.LatLng(poly.coords[j].latitude, poly.coords[j].longitude));\n\n                        overlay = new google.maps.Polygon({\n                            map: this.map,\n                            path: overlay,\n                            strokeColor: poly.color ? poly.color : this.opts.polygon.color,\n                            strokeOpacity: poly.opacity ? poly.opacity : this.opts.polygon.opacity,\n                            strokeWeight: poly.weight ? poly.weight : this.opts.polygon.weight,\n                            fillColor: poly.fillColor ? poly.fillColor : this.opts.polygon.fillColor,\n                            fillOpacity: poly.fillOpacity ? poly.fillOpacity : this.opts.polygon.fillOpacity\n                        });\n                    }\n                    else\n                        return false;\n                    break;\n                case 'circle':\n                    overlay = new google.maps.Circle({\n                        map: this.map,\n                        center: new google.maps.LatLng(poly.latitude, poly.longitude),\n                        radius: poly.radius,\n                        strokeColor: poly.color ? poly.color : this.opts.circle.color,\n                        strokeOpacity: poly.opacity ? poly.opacity : this.opts.circle.opacity,\n                        strokeWeight: poly.weight ? poly.weight : this.opts.circle.weight,\n                        fillColor: poly.fillColor ? poly.fillColor : this.opts.circle.fillColor,\n                        fillOpacity: poly.fillOpacity ? poly.fillOpacity : this.opts.circle.fillOpacity\n                    });\n                    break;\n                case 'rectangle':\n                    overlay = new google.maps.Rectangle({\n                        map: this.map,\n                        bounds: new google.maps.LatLngBounds(new google.maps.LatLng(poly.sw.latitude, poly.sw.longitude), new google.maps.LatLng(poly.ne.latitude, poly.ne.longitude)),\n                        strokeColor: poly.color ? poly.color : this.opts.circle.color,\n                        strokeOpacity: poly.opacity ? poly.opacity : this.opts.circle.opacity,\n                        strokeWeight: poly.weight ? poly.weight : this.opts.circle.weight,\n                        fillColor: poly.fillColor ? poly.fillColor : this.opts.circle.fillColor,\n                        fillOpacity: poly.fillOpacity ? poly.fillOpacity : this.opts.circle.fillOpacity\n                    });\n                    break;\n                default:\n                    return false;\n                    break;\n            }\n            this.addOverlay(poly, overlay);\n            return overlay;\n        },\n\n        addOverlay: function (poly, overlay) {\n            $(this[this.overlays[poly.type].id]).data(poly.id, overlay);\n            this[this.overlays[poly.type].array].push(poly.id);\n        },\n\n        setOverlay: function (type, overlay, options) {\n            overlay = $(this[this.overlays[type].id]).data(overlay);\n\n            if (options.coords && options.coords.length > 0) {\n                var array = [];\n                for (var j = 0, l = options.coords.length; j < l; j++)\n                    array.push(new google.maps.LatLng(options.coords[j].latitude, options.coords[j].longitude));\n\n                options.path = array;\n                delete options.coords;\n            }\n            else if (options.ne && options.sw) {\n                options.bounds = new google.maps.LatLngBounds(new google.maps.LatLng(options.sw.latitude, options.sw.longitude), new google.maps.LatLng(options.ne.latitude, options.ne.longitude));\n                delete options.ne;\n                delete options.sw;\n            }\n            else if (options.latitude && options.longitude) {\n\n                options.center = new google.maps.LatLng(options.latitude, options.longitude);\n                delete options.latitude;\n                delete options.longitude;\n            }\n            overlay.setOptions(options);\n        },\n\n        showHideOverlay: function (type, overlay, display) {\n            if (typeof display === 'undefined') {\n                if (this.getVisibleOverlay(type, overlay))\n                    display = false;\n                else\n                    display = true;\n            }\n\n            if (display)\n                $(this[this.overlays[type].id]).data(overlay).setMap(this.map);\n            else\n                $(this[this.overlays[type].id]).data(overlay).setMap(null);\n        },\n\n        getVisibleOverlay: function (type, overlay) {\n            if ($(this[this.overlays[type].id]).data(overlay).getMap())\n                return true;\n            else\n                return false;\n        },\n\n        getOverlaysCount: function (type) {\n            return this[this.overlays[type].array].length;\n        },\n\n        removeOverlay: function (type, overlay) {\n            var index = $.inArray(overlay, this[this.overlays[type].array]), current;\n            if (index > -1) {\n                current = this[this.overlays[type].array].splice(index, 1);\n                var markerId = current[0];\n                $(this[this.overlays[type].id]).data(markerId).setMap(null);\n                $(this[this.overlays[type].id]).removeData(markerId);\n\n                return true;\n            }\n            return false;\n        },\n\n        clearOverlays: function (type) {\n            for (var i = 0, l = this[this.overlays[type].array].length; i < l; i++) {\n                var markerId = this[this.overlays[type].array][i];\n                $(this[this.overlays[type].id]).data(markerId).setMap(null);\n                $(this[this.overlays[type].id]).removeData(markerId);\n            }\n            this[this.overlays[type].array] = [];\n        },\n\n        showHideMarker: function (marker, display) {\n            if (typeof display === 'undefined') {\n                if (this.getVisibleMarker(marker)) {\n                    $(this.mapId).data(marker).setVisible(false);\n                    var info = $(this.mapId).data(marker + 'info');\n                    if (info && info.show) {\n                        info.close();\n                        info.show = false;\n                    }\n                }\n                else\n                    $(this.mapId).data(marker).setVisible(true);\n            }\n            else\n                $(this.mapId).data(marker).setVisible(display);\n        },\n\n        showHideMarkerByGroup: function (group, display) {\n            for (var i = 0, l = this.markers.length; i < l; i++) {\n                var markerId = this.markers[i];\n                var marker = $(this.mapId).data(markerId);\n                if (marker.group == group) {\n                    if (typeof display === 'undefined') {\n                        if (this.getVisibleMarker(markerId)) {\n                            marker.setVisible(false);\n                            var info = $(this.mapId).data(markerId + 'info');\n                            if (info && info.show) {\n                                info.close();\n                                info.show = false;\n                            }\n                        }\n                        else {\n                            marker.setVisible(true);\n                        }\n                    }\n                    else\n                        marker.setVisible(display);\n                }\n            }\n        },\n\n        getVisibleMarker: function (marker) {\n            return $(this.mapId).data(marker).getVisible();\n        },\n\n        getMarkerCount: function () {\n            return this.markers.length;\n        },\n\n        getTmpMarkerCount: function () {\n            return this.tmpMarkers.length;\n        },\n\n        getVisibleMarkerCount: function () {\n            return this.getMarkers('visiblesInMap').length;\n        },\n\n        getMarkerByGroupCount: function (group) {\n            return this.getMarkers('group', group).length;\n        },\n\n        getMarkers: function (type, name) {\n            var array = [];\n            switch (type) {\n                case \"json\":\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        var temp = \"'\" + i + \"': '\" + $(this.mapId).data(this.markers[i]).getPosition().toUrlValue() + \"'\";\n                        array.push(temp);\n                    }\n                    array = \"{'markers':{\" + array.join(\",\") + \"}}\";\n                    break;\n                case \"data\":\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        var temp = \"marker[\" + i + \"]=\" + $(this.mapId).data(this.markers[i]).getPosition().toUrlValue();\n                        array.push(temp);\n                    }\n                    array = array.join(\"&\");\n                    break;\n                case \"visiblesInBounds\":\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        if (this.isVisible($(this.mapId).data(this.markers[i]).getPosition()))\n                            array.push(this.markers[i]);\n                    }\n                    break;\n                case \"visiblesInMap\":\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        if (this.getVisibleMarker(this.markers[i]))\n                            array.push(this.markers[i]);\n                    }\n                    break;\n                case \"group\":\n                    if (name)\n                        for (var i = 0, l = this.markers.length; i < l; i++) {\n                            if ($(this.mapId).data(this.markers[i]).group == name)\n                                array.push(this.markers[i]);\n                        }\n                    break;\n                case \"markers\":\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        var temp = $(this.mapId).data(this.markers[i]);\n                        array.push(temp);\n                    }\n                    break;\n                default:\n                    for (var i = 0, l = this.markers.length; i < l; i++) {\n                        var temp = $(this.mapId).data(this.markers[i]).getPosition().toUrlValue();\n                        array.push(temp);\n                    }\n                    break;\n            }\n            return array;\n        },\n\n        getVisibleMarkers: function () {\n            return this.getMarkers('visiblesInBounds');\n        },\n\n        createMarker: function (marker) {\n            if (!marker.geocode) {\n                this.count++;\n                if (!marker.id)\n                    marker.id = this.opts.prefixId + this.count;\n                this.tmpMarkers.push(marker.id);\n            }\n            if (marker.address && !marker.geocode) {\n                this.geoMarkers.push(marker);\n                this.geoMarker();\n            }\n            else if (marker.latitude && marker.longitude || marker.position) {\n                var options = {map: this.map};\n                options.id = marker.id;\n                options.group = marker.group ? marker.group : this.opts.groupId;\n                options.zIndex = marker.zIndex ? marker.zIndex : 0;\n                options.zIndexOrg = marker.zIndexOrg ? marker.zIndexOrg : 0;\n\n\n                options.optimized = false; // fixes this bug https://code.google.com/p/gmaps-api-issues/issues/detail?id=4431\n\n                if (marker.visible == false)\n                    options.visible = marker.visible;\n\n                if (marker.title)\n                    options.title = marker.title;\n\n                if (marker.label)\n                    options.label = marker.label;\n\n                if (marker.draggable)\n                    options.draggable = marker.draggable;\n\n                if (marker.icon && marker.icon.image) {\n                    options.icon = marker.icon.image;\n                    if (marker.icon.shadow)\n                        options.shadow = marker.icon.shadow;\n                }\n                else if (marker.icon)\n                    options.icon = marker.icon;\n\n                else if (this.opts.icon && this.opts.icon.image) {\n                    options.icon = this.opts.icon.image;\n                    if (this.opts.icon.shadow)\n                        options.shadow = this.opts.icon.shadow;\n                }\n                else if (this.opts.icon)\n                    options.icon = this.opts.icon;\n\n                options.position = marker.position ? marker.position : new google.maps.LatLng(marker.latitude, marker.longitude);\n                if (marker.animation) {\n                    options.animation = marker.animation;\n                }\n\n                var cmarker = new google.maps.Marker(options);\n\n                if (marker.html) {\n                    if (!marker.html.content && !marker.html.ajax && !marker.html.id)\n                        marker.html = {content: marker.html};\n                    else if (!marker.html.content)\n                        marker.html.content = null;\n\n                    this.setInfoWindow(cmarker, marker.html);\n                }\n                this.addMarker(cmarker);\n                return cmarker;\n            }\n        },\n\n        addMarker: function (marker) {\n            $(this.mapId).data(marker.id, marker);\n            this.markers.push(marker.id);\n        },\n\n        setMarker: function (marker, options) {\n            var tmarker = $(this.mapId).data(marker);\n\n            delete options.id;\n            delete options.visible;\n\n            if (options.icon) {\n                var toption = options.icon;\n                delete options.icon;\n\n                if (toption && toption == 'default') {\n                    if (this.opts.icon && this.opts.icon.image) {\n                        options.icon = this.opts.icon.image;\n                        if (this.opts.icon.shadow)\n                            options.shadow = this.opts.icon.shadow;\n                    }\n                    else if (this.opts.icon)\n                        options.icon = this.opts.icon;\n                }\n                else if (toption && toption.image) {\n                    options.icon = toption.image;\n                    if (toption.shadow)\n                        options.shadow = toption.shadow;\n                }\n                else if (toption)\n                    options.icon = toption;\n            }\n\n            if (options.address) {\n                this.geocode({address: options.address}, {markerId: tmarker});\n                delete options.address;\n                delete options.latitude;\n                delete options.longitude;\n                delete options.position;\n            }\n            else if (options.latitude && options.longitude || options.position) {\n                if (!options.position)\n                    options.position = new google.maps.LatLng(options.latitude, options.longitude);\n            }\n            tmarker.setOptions(options);\n        },\n\n        removeMarker: function (marker) {\n            var index = $.inArray(marker, this.markers), current;\n            if (index > -1) {\n                this.tmpMarkers.splice(index, 1);\n                current = this.markers.splice(index, 1);\n                var markerId = current[0];\n                var marker = $(this.mapId).data(markerId);\n                var info = $(this.mapId).data(markerId + 'info');\n\n                marker.setVisible(false);\n                marker.setMap(null);\n                $(this.mapId).removeData(markerId);\n\n                if (info) {\n                    info.close();\n                    info.show = false;\n                    $(this.mapId).removeData(markerId + 'info');\n                }\n                return true;\n            }\n            return false;\n        },\n\n        clearMarkers: function () {\n            for (var i = 0, l = this.markers.length; i < l; i++) {\n                var markerId = this.markers[i];\n                var marker = $(this.mapId).data(markerId);\n                var info = $(this.mapId).data(markerId + 'info');\n\n                marker.setVisible(false);\n                marker.setMap(null);\n                $(this.mapId).removeData(markerId);\n\n                if (info) {\n                    info.close();\n                    info.show = false;\n                    $(this.mapId).removeData(markerId + 'info');\n                }\n            }\n            this.singleMarker = false;\n            this.lockGeocode = false;\n            this.markers = [];\n            this.tmpMarkers = [];\n            this.geoMarkers = [];\n        },\n\n        clearMarkersDelay: function () {\n\n            var old_markers =this.markers;\n            setTimeout(function(){\n            for (var i = 0, l = old_markers.length; i < l; i++) {\n                var markerId = old_markers[i];\n                var marker = $(this.mapId).data(markerId);\n                var info = $(this.mapId).data(markerId + 'info');\n\n                marker.setVisible(false);\n                marker.setMap(null);\n                $(this.mapId).removeData(markerId);\n\n                if (info) {\n                    info.close();\n                    info.show = false;\n                    $(this.mapId).removeData(markerId + 'info');\n                }\n            }\n            this.singleMarker = false;\n            this.lockGeocode = false;\n            this.markers = [];\n            this.tmpMarkers = [];\n            this.geoMarkers = [];\n            }, 3000);\n        },\n\n        isVisible: function (latlng) {\n            return this.map.getBounds().contains(latlng);\n        }\n    }\n})(jQuery);\n}\n\n/* Do not load for lazy load */\nif ( ! window.gdLoadMap ) {\n    /*if (window.gdSetMap=='google' || window.gdSetMap=='auto') {\n        var igMapCheck = 0, gMapCheck = setInterval(function(e) {\n            igMapCheck++;\n            if (window.geodirGoogleMapsCallback || igMapCheck >= 300) {\n                clearInterval(gMapCheck);\n                geodirGoMapInit();\n            }\n        }, 50);\n    } else {*/\n         geodirGoMapInit();\n    /*}*/\n}\n\nfunction gdGeoLocateMe(el, type) {\n    window.gdLocate = '';\n    if (typeof type != 'undefined') {\n        window.gdLocate = type;\n    }\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(gdGeoLocateMeSuccess, gdGeoLocateMeError, {\n\t\t\tenableHighAccuracy: true,\n\t\t\ttimeout: 10000,\n\t\t\tmaximumAge: 0\n\t\t});\n    } else {\n        gdGeoLocateMeError(-1);\n    }\n}\nfunction gdGeoLocateMeSuccess(position) {\n    var coords = position.coords || position.coordinate || position;\n    if (coords && coords.latitude && coords.longitude) {\n        var myLat = coords.latitude, myLng = coords.longitude;\n        var geoAddress = myLat + ', ' + myLng;\n        if (window.gdMaps == 'google' || window.gdMaps == 'osm') {\n            if (window.gdLocate && window.gdLocate == 'add-listing') {\n                if (typeof geocodePosition != 'undefined') {\n                    jQuery(\"#postmap\").goMap();\n                    user_address = false;\n                    if (window.gdMaps == 'google') {\n                        jQuery.goMap.map.setCenter(new google.maps.LatLng(myLat, myLng));\n                        baseMarker.setPosition(new google.maps.LatLng(myLat, myLng));\n                        updateMarkerPosition(baseMarker.getPosition());\n                        geocodePosition(baseMarker.getPosition());\n                    } else if (window.gdMaps == 'osm') {\n                        centerMap(new L.latLng(myLat, myLng));\n                        baseMarker.setLatLng(new L.latLng(myLat, myLng));\n                        updateMarkerPositionOSM(baseMarker.getLatLng());\n                        geocodePositionOSM(baseMarker.getLatLng());\n                    }\n                }\n            } else {\n                //\n            }\n        }\n    }\n}\nfunction gdGeoLocateMeError(err) {\n    var msg;\n    switch (err.code) {\n        case err.UNKNOWN_ERROR:\n            msg = geodir_params.geoErrUNKNOWN_ERROR;\n            break;\n        case err.PERMISSION_DENINED:\n            msg = geodir_params.geoErrPERMISSION_DENINED;\n            break;\n        case err.POSITION_UNAVAILABLE:\n            msg = geodir_params.geoErrPOSITION_UNAVAILABLE;\n            break;\n        case err.BREAK:\n            msg = geodir_params.geoErrBREAK;\n            break;\n        default:\n            msg = geodir_params.geoErrDEFAULT;\n    }\n    alert(msg);\n}\n"],"names":["geodirGoMapInit","$","geocoder","MyOverlay","map","$this","options","goMap","goMapBase","osmMapBase","el","opts","baseLayer","customMap","myOptions","apikey","e","osmUrl","osmAttrib","i","gdOSMUpdateProgressBar","processed","total","elapsed","layersArray","j","l","event","marker","f","address","gdcoder","position","$default","parsed","current","html","infowindow","id","text","info","hideDiv","type","markers","name","array","temp","c","w","h","cmarker","index","markerId","allMarkers","latlng","results","status","data","target","listener","poly","overlay","display","group","tmarker","toption","old_markers"],"mappings":"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"}