(function(){function S(e){const t=e.getAttribute("field_type");let o=!0,i=window.geodir_params?.field_id_required||"This field is required.";const n=e.closest(".required_field");if(!n)return!0;switch(t){case"radio":case"checkbox":const s=n.querySelectorAll(":checked");o=s.length>0;const r=n.querySelector("#cat_limit");if(r){const d=parseInt(r.getAttribute("cat_limit")),g=r.value;s.length>d&&d>0&&(o=!1,i=g)}break;case"select":if(n.querySelector(".geodir_taxonomy_field")&&n.querySelector("#post_category"))o=n.querySelector("#post_category").value!=="";else{const d=e.querySelector("option:selected");o=d&&d.value!==""}break;case"multiselect":const a=n.querySelector("#cat_limit");if(a){const d=parseInt(a.getAttribute("cat_limit")),g=a.value,h=e.querySelectorAll("option:selected");h.length>d&&d>0?(o=!1,i=g):o=h.length>0}else o=e.querySelectorAll("option:selected").length>0;break;case"email":const l=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;o=e.value!==""&&l.test(e.value);break;case"url":const c=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;o=e.value!==""&&c.test(e.value);break;case"editor":const u=e.getAttribute("field_id"),f=document.getElementById(u);o=f&&f.value!=="";break;case"address":e.id==="post_latitude"||e.id==="post_longitude"?/^[0-90\-.]*$/.test(e.value)&&e.value!==""?o=!0:(o=!1,i=e.id==="post_latitude"?window.geodir_params?.latitude_error_msg||"Please enter a valid latitude.":window.geodir_params?.longgitude_error_msg||"Please enter a valid longitude."):o=e.value.trim()!=="";break;case"datepicker":case"time":case"text":case"hidden":case"textarea":o=e.value.trim()!=="";break;default:o=e.value.trim()!=="";break}return $(n,e,o,i),o}function $(e,t,o,i){const n=e.querySelector(".geodir_message_error");o?(t.classList.remove("is-invalid"),t.classList.add("is-valid"),n&&(n.textContent="",n.style.display="none")):(t.classList.remove("is-valid"),t.classList.add("is-invalid"),n&&(n.textContent===""&&(n.textContent=i),n.style.display="block"))}function b(e){let t=!0;return e.querySelectorAll('.required_field:not([style*="display: none"])').forEach(i=>{i.querySelectorAll('[field_type]:not([style*="display: none"]), .geodir_select, .geodir_location_add_listing_chosen, .editor, .event_recurring_dates, .geodir-custom-file-upload, .gd_image_required_field, .g-recaptcha-response, [name="cf-turnstile-response"]').forEach(s=>{S(s)||(t=!1)})}),t}function L(e){let t=!0;if(e.querySelectorAll('.required_field:not([style*="display: none"])').forEach(i=>{i.querySelectorAll('[field_type]:not([style*="display: none"]), .geodir_select, .geodir_location_add_listing_chosen, .editor, .event_recurring_dates, .geodir-custom-file-upload, .gd_image_required_field').forEach(s=>{S(s)||(t=!1)})}),!t){const i=document.querySelector("#save-action .spinner"),n=document.querySelector("#save-action #save-post"),s=document.querySelector("#publishing-action .spinner"),r=document.querySelector("#publishing-action #publish");i&&i.classList.remove("is-active"),n&&n.classList.remove("disabled"),s&&s.classList.remove("is-active"),r&&r.classList.remove("disabled")}return t}function z(){typeof tinymce<"u"&&tinymce.editors&&tinymce.editors.length>0&&tinymce.editors.forEach(e=>{e.save()})}function E(){try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function F(e){z();const t=new FormData(e);return new URLSearchParams(t).toString()}function B(e,t=100){if(!e)return;const i=e.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:i,behavior:"smooth"})}let A=!1,w=!1,q="";function H(e){const t=window.geodir_params?.autosave||0;t<=0||(q=F(e),M(e),V(e,t),N())}function M(e){if(!E())return;const t=e.querySelector("#user_login"),o=e.querySelector("#user_email");t&&localStorage.getItem("geodirUserLogin")&&(t.value=localStorage.getItem("geodirUserLogin")),o&&localStorage.getItem("geodirUserEmail")&&(o.value=localStorage.getItem("geodirUserEmail"))}function R(e){if(!E())return;const t=e.querySelector("#user_login"),o=e.querySelector("#user_email");t&&t.value&&localStorage.setItem("geodirUserLogin",t.value),o&&o.value&&localStorage.setItem("geodirUserEmail",o.value)}function O(){E()&&(localStorage.removeItem("geodirUserLogin"),localStorage.removeItem("geodirUserEmail"))}function V(e,t){setInterval(()=>{const o=F(e);o!==q&&!w&&(console.log("Form has changed, auto-saving..."),T(e),A=!0,q=o)},t)}async function T(e){if(w)return;R(e);const t=e.querySelector('input[name="ID"]');if(!t||!t.value){console.log("No post ID found, skipping autosave");return}const o=t.value,i=e.querySelector('input[name="post_type"]')?.value||"gd_place",n=new FormData(e),s={};for(let[r,a]of n.entries()){if(r==="action"||r==="target")continue;const l=r.match(/^([^\[]+)(?:\[([^\]]*)\])?(?:\[\])?$/);if(l&&l[2]!==void 0){const c=l[1],u=l[2],f=r.endsWith("[]");s[c]||(s[c]={}),f?(s[c][u]||(s[c][u]=[]),a!==""&&s[c][u].push(a)):s[c][u]=a}else s.hasOwnProperty(r)?(Array.isArray(s[r])||(s[r]=[s[r]]),s[r].push(a)):s[r]=a}try{const r=await window.GeoDir.api.post(`${i}/${o}/autosave`,s);r.success&&(r.autosaved?console.log("Auto-saved successfully"):console.log("No changes to save"))}catch(r){console.error("Auto-save error:",r)}}function U(e){return T(e)}function N(){window.addEventListener("beforeunload",e=>{if(A){const t=window.geodir_params?.txt_lose_changes||"You have unsaved changes. Are you sure you want to leave?";return e.preventDefault(),e.returnValue=t,t}})}function G(){A=!1}typeof window<"u"&&(window.geodirUploading=!1,Object.defineProperty(window,"geodirUploading",{get(){return w},set(e){w=e}}));async function P(e,t){return e.preventDefault(),b(t)?(await Z(t),!1):(Y(t),!1)}async function Z(e){console.log("Submitting form...");const t=e.querySelector("#geodir-add-listing-submit button"),o=t?t.innerHTML:"";try{let u=function(g){const h=/\[\]$/.test(g);return{parts:[...g.replace(/\[\]$/,"").matchAll(/([^[\]]+)/g)].map(p=>p[1]),forceArray:h}},f=function(g,h,y,v){let p=g;for(let _=0;_<h.length;_++){const m=h[_];if(!(_===h.length-1)){(p[m]==null||typeof p[m]!="object"||Array.isArray(p[m]))&&(p[m]={}),p=p[m];continue}v?(Array.isArray(p[m])||(p[m]=[]),p[m].push(y)):p[m]=y}};var i=u,n=f;t&&(t.innerHTML='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> '+o,t.classList.add("gd-disabled"),t.disabled=!0),O();const s=e.querySelector('input[name="ID"]'),r=s?s.value:null,a=e.querySelector('input[name="post_type"]')?.value||"gd_place",l=new FormData(e),c={};for(const[g,h]of l.entries()){if(g==="action"||g==="target")continue;const{parts:y,forceArray:v}=u(g);f(c,y,h,v)}let d;if(r?d=await window.GeoDir.api.put(`${a}/${r}`,c):d=await window.GeoDir.api.post(a,c),d.success)return console.log("Form submitted successfully"),console.log(d),G(),j(d),d.payment_url?(window.location.href=d.payment_url,!0):(d.permalink?setTimeout(()=>{window.location.href=d.permalink},2e3):d.preview_link&&setTimeout(()=>{window.location.href=d.preview_link},2e3),!0)}catch(s){return console.error("Form submission error:",s),t&&(t.innerHTML=o,t.classList.remove("gd-disabled"),t.disabled=!1),alert(s.message||"An error occurred. Please try again."),document.dispatchEvent(new Event("ayecode_reset_captcha")),!1}}function j(e){document.querySelectorAll(".gd-notification").forEach(i=>i.remove());const t=document.createElement("div");t.className="gd-notification alert alert-success",t.innerHTML=e.message||"Listing saved successfully!";const o=document.querySelector("#geodirectory-add-post");if(o){o.insertAdjacentElement("beforebegin",t);const i=t.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:i,behavior:"smooth"})}}async function W(e){const t=e.querySelector('input[name="ID"]'),o=t?t.value:null,i=e.querySelector('input[name="post_type"]')?.value||"gd_place";if(!o)return console.error("No post ID found for revision deletion"),!1;if(!confirm("Are you sure you want to delete this draft/revision and start fresh?"))return!1;try{if((await window.GeoDir.api.delete(`${i}/${o}?force=true`)).success)return console.log("Revision deleted successfully"),location.reload(),!0}catch(n){return console.error("Revision deletion error:",n),alert(n.message||"Failed to delete revision. Please try again."),!1}}function Y(e){const t=e.querySelector('.geodir_message_error:not([style*="display: none"])');if(t){const i=t.closest(".required_field");if(i){const n=i.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:n,behavior:"smooth"});return}}const o=e.querySelector(".is-invalid");if(o){const i=o.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:i,behavior:"smooth"})}}function C(e){K(e),X(e),te(e),x(e)}function K(e){e.querySelectorAll(".geodir_form_row input[data-ccheckbox]").forEach(n=>{n.addEventListener("change",function(s){J(this,e)})}),e.querySelectorAll(".gd-make-default-term").forEach(n=>{n.addEventListener("click",function(s){s.preventDefault(),Q(this,e)})});const i=e.querySelector(".geodir_form_row input[data-ccheckbox]:first-of-type");i&&i.dispatchEvent(new Event("change"))}function J(e,t){const o=e.closest(".geodir_form_row"),i=e.dataset.ccheckbox,n=t.querySelector(`input[name="${i}"]`);if(!o||!n)return;o.classList.remove("gd-term-handle"),o.querySelectorAll(".gd-term-checked").forEach(f=>f.classList.remove("gd-term-checked")),o.querySelectorAll(".gd-default-term").forEach(f=>f.classList.remove("gd-default-term"));let s=0,r=null;const a=n.value||"",l=e.getAttribute("name");o.querySelectorAll(`[name="${l}"]`).forEach(f=>{f.checked&&(s++,f.parentElement.classList.add("gd-term-checked"),s===1&&(r=f))}),s>1&&o.classList.add("gd-term-handle");const u=o.querySelector(`#gd-cat-${a}`);if(u&&u.checked&&(r=u),r){const f=r.parentElement.querySelector(".gd-make-default-term");f&&f.click()}else n.value="",n.dispatchEvent(new Event("change"))}function Q(e,t){const o=e.closest(".geodir_form_row"),i=e.parentElement,n=i.querySelector('[type="checkbox"]');if(!n)return;const s=n.dataset.ccheckbox,r=t.querySelector(`input[name="${s}"]`);if(!r)return;o.querySelectorAll(".gd-default-term").forEach(l=>l.classList.remove("gd-default-term")),i.classList.add("gd-default-term");const a=n.value;r.value=a,r.dispatchEvent(new Event("change"))}function X(e){e.querySelectorAll(".geodir_form_row input[data-cradio]").forEach(i=>{i.addEventListener("change",function(){ee(this,e)})});const o=e.querySelector(".geodir_form_row input[data-cradio]:first-of-type");o&&o.dispatchEvent(new Event("change"))}function ee(e,t){const o=e.dataset.cradio,i=t.querySelector(`input[name="${o}"]`);if(!i)return;let n="";const s=e.getAttribute("name"),r=t.querySelector(`[name="${s}"]:checked`);r&&(n=r.value),i.value=n}function te(e){e.querySelectorAll('.geodir_taxonomy_field .geodir-category-select, .geodir_taxonomy_field [data-ccheckbox="default_category"], .geodir_taxonomy_field input[data-cradio]').forEach(o=>{o.addEventListener("change",()=>{x(e);const i=e.querySelector('[name="default_category"]');i&&i.dispatchEvent(new Event("change"))})})}function x(e){const t=e.querySelector("#default_category");if(!t)return;const o=t.value,i=e.querySelector(".geodir_taxonomy_field .geodir-category-select");if(i){t.innerHTML="";const r=Array.from(i.selectedOptions).map(a=>a.value);r.length>0?i.querySelectorAll("option").forEach(a=>{if(r.includes(a.value)){const l=document.createElement("option");l.value=a.value,l.textContent=a.textContent,l.selected=o===a.value||!o&&r[0]===a.value,t.appendChild(l)}}):t.value="";return}const n=e.querySelectorAll('.geodir_taxonomy_field [data-ccheckbox="default_category"]');if(n.length>0){t.innerHTML="";const r=Array.from(n).filter(a=>a.checked);r.length>0?r.forEach((a,l)=>{const c=document.createElement("option");c.value=a.value,c.textContent=a.title||a.value,c.selected=o===a.value||!o&&l===0,t.appendChild(c)}):t.value="";return}if(e.querySelectorAll('.geodir_taxonomy_field [data-cradio="default_category"]').length>0){const r=e.querySelector('.geodir_taxonomy_field [data-cradio="default_category"]:checked');r?t.value=r.value:t.value=""}}class oe{constructor(t){if(this.params=t,this.field=t.field,this.fieldElement=document.querySelector(`[name="${this.field}"]`),!this.fieldElement||(this.wrap=this.fieldElement.closest(".gd-bh-row"),!this.wrap))return;const o=this.wrap.querySelector(".gd-bh-items .gd-bh-blank");this.slotTemplate=o?o.innerHTML:"",this.defaultTimezoneString=window.geodir_params?.timezone_string||"",this.defaultOffset=window.geodir_params?.gmt_offset||"0",this.gmtOffset=t.offset||this.defaultOffset,this.init()}init(){this.setupActiveToggle(),this.setupTimezoneChange(),this.setupAddSlot(),this.setup24HoursToggle(),setTimeout(()=>{this.initializeExistingSlots(),this.attachRemoveHandlers(),this.attachChangeHandlers()},100)}setupActiveToggle(){const t=this.wrap.querySelector('[data-field="active"]');t&&t.addEventListener("change",o=>{const i=this.wrap.querySelector(".gd-bh-items");if(t.value==="1"){i&&(i.style.display="block");const n=this.wrap.querySelector('[data-field="timezone_string"]');n&&n.classList.contains("select2-hidden-accessible")}else i&&(i.style.display="none");this.setValue(),o.preventDefault()})}setupTimezoneChange(){const t=this.wrap.querySelector('[data-field="timezone_string"]');if(!t)return;t.addEventListener("change",i=>{this.setValue(),i.preventDefault()});const o=this.wrap.closest("form");if(o){const i=o.querySelector('[name="latitude"]'),n=o.querySelector('[name="longitude"]');i&&n&&[i,n].forEach(s=>{s.addEventListener("change",()=>{window.gdTzApi||(window.gdTzApi=!0,setTimeout(()=>{this.getTimezone(t)},1e3))})})}}setupAddSlot(){this.wrap.querySelectorAll(".gd-bh-add").forEach(o=>{o.addEventListener("click",i=>{i.preventDefault(),this.addSlot(o)})})}setup24HoursToggle(){this.wrap.querySelectorAll('.gd-bh-24hours [type="checkbox"]').forEach(o=>{o.addEventListener("click",()=>{this.handle24HoursChange(o)})})}initializeExistingSlots(){this.wrap.querySelectorAll(".gd-bh-has24").forEach(i=>{this.handle24Hours(i.closest(".gd-bh-item"))}),this.wrap.querySelectorAll(".gd-bh-hours").length>0&&this.attachChangeHandlers()}addSlot(t){const o=t.closest(".gd-bh-item");if(!o)return;const i=Math.floor(Math.random()*1e11).toString();o.querySelectorAll(".gd-bh-closed").forEach(l=>l.remove()),o.classList.remove("gd-bh-item-closed");const n=o.querySelector('.gd-bh-24hours [type="checkbox"]');n&&(n.style.display="");let s=this.slotTemplate.replace(/GD_UNIQUE_ID/g,i);const r=o.querySelector(".gd-bh-time");if(!r)return;const a=r.dataset.field;s=s.replace('data-field-alt="open"',`data-field-alt="open" name="${a}[open][]" data-aui-init="flatpickr"`),s=s.replace('data-field-alt="close"',`data-field-alt="close" name="${a}[close][]" data-aui-init="flatpickr"`),r.insertAdjacentHTML("beforeend",s),this.initTimePickers(),this.attachRemoveHandlers(),this.attachChangeHandlers()}removeSlot(t){const o=t.closest(".gd-bh-hours");if(!o)return;const i=o.closest(".gd-bh-time"),n=i.closest(".gd-bh-item");if(o.remove(),i.querySelectorAll(".gd-bh-hours").length===0){n.classList.add("gd-bh-item-closed");const r=n.querySelector('.gd-bh-24hours [type="checkbox"]');r&&(r.style.display="none");const a=window.geodir_params?.txt_closed||"Closed";i.innerHTML=`<div class="gd-bh-closed text-center">${a}</div>`}this.setValue()}attachRemoveHandlers(){this.wrap.querySelectorAll(".gd-bh-remove").forEach(o=>{const i=o.cloneNode(!0);o.parentNode.replaceChild(i,o),i.addEventListener("click",n=>{n.preventDefault(),this.removeSlot(i)})})}attachChangeHandlers(){this.wrap.querySelectorAll(`[name^="${this.field}_f[hours]"]`).forEach(o=>{const i=o.cloneNode(!0);o.parentNode.replaceChild(i,o),i.addEventListener("change",n=>{const s=i.closest(".gd-bh-item");this.handle24Hours(s),this.setValue(),n.preventDefault()})})}handle24HoursChange(t){const o=t.closest(".gd-bh-item"),i=o.querySelector(".gd-bh-hours:first-of-type");if(i)if(t.checked){const n=t.closest(".gd-bh-items").dataset["12am"]?.trim()||"12:00 AM";o.classList.add("gd-bh-item-24hours"),o.querySelectorAll(".input-group").forEach(u=>{u.style.opacity="0.67"});const r=i.querySelector(".gd-alt-open"),a=i.querySelector(".gd-alt-close"),l=i.querySelector('[data-field-alt="open"]'),c=i.querySelector('[data-field-alt="close"]');r&&(r.value=n),a&&(a.value=n),l&&(l.value="00:00",l.dispatchEvent(new Event("change"))),c&&(c.value="00:00")}else o.querySelectorAll(".input-group").forEach(s=>{s.style.opacity="1"})}handle24Hours(t){if(!t)return;let o=!1;t.querySelectorAll(".gd-bh-hours").forEach(s=>{const r=s.querySelector('[data-field-alt="open"]'),a=s.querySelector('[data-field-alt="close"]');if(r&&a){const l=r.value.trim(),c=a.value.trim();l==="00:00"&&c==="00:00"&&(o=!0)}});const n=t.querySelector('.gd-bh-24hours input[type="checkbox"]');n&&(n.checked=o),o?(t.classList.add("gd-bh-item-24hours"),t.querySelectorAll(".input-group").forEach(r=>{r.style.opacity="0.67"})):(t.classList.remove("gd-bh-item-24hours"),t.querySelectorAll(".input-group").forEach(r=>{r.style.opacity="1"}))}setValue(){const t=this.wrap.querySelector(`[name="${this.field}_f_active"]:checked`);let o="";t&&t.value==="1"&&(o=this.toSchema()),this.fieldElement.value=o,this.fieldElement.dispatchEvent(new Event("change"))}toSchema(){const t=this.wrap.querySelectorAll(".gd-bh-item"),o=[];t.forEach(a=>{const l=a.querySelector(".gd-bh-time");if(!l)return;const c=l.dataset.day;if(!c)return;const u=[];a.querySelectorAll(".gd-bh-hours").forEach(d=>{const g=d.querySelector('[data-field-alt="open"]'),h=d.querySelector('[data-field-alt="close"]');if(g){const y=g.value.trim();let v=h?h.value.trim():"";y&&(v||(v="00:00"),u.push(`${y}-${v}`))}}),u.length>0&&o.push(`${c} ${u.join(",")}`)});let i="";o.length>0&&(i+=JSON.stringify(o),i+=",");const n=this.wrap.querySelector('[data-field="timezone_string"]');let s=this.defaultTimezoneString,r=this.defaultOffset;if(n){s=n.value||s;const a=n.querySelector("option:checked");a&&(r=a.dataset.offset||r)}return i+=`["UTC":"${r}","Timezone":"${s}"]`,i}initTimePickers(){typeof window.aui_init=="function"&&window.aui_init()}async getTimezone(t,o=""){const i=t.closest("form");if(!i)return;const n=i.querySelector(`[name="${o}latitude"]`),s=i.querySelector(`[name="${o}longitude"]`);if(!n||!s)return;const r=n.value.trim(),a=s.value.trim();if(!(!r||!a))try{const c=await(await fetch(window.geodir_params.gd_ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"geodir_timezone_data",security:window.geodir_params.basic_nonce,lat:r,lon:a,ts:Math.round(Date.now()/1e3).toString()})})).json();c.success&&c.data.timeZoneId?(t.value=c.data.timeZoneId,t.dispatchEvent(new Event("change"))):c.data&&c.data.error&&console.log(c.data.error)}catch(l){console.error("Timezone fetch error:",l)}finally{window.gdTzApi=!1}}}function I(e){e.querySelectorAll(".gd-bh-row").forEach(o=>{const i=o.querySelector('[name*="business_hours"]');if(i){const n=i.getAttribute("name");new oe({field:n,offset:window.geodir_params?.gmt_offset||"0"})}})}function k(){const e=document.querySelector("#geodirectory-add-post");e&&ie(e);const t=document.querySelector("form#post .postbox#geodir_post_info");t&&ne(t)}function ie(e){console.log("Initializing frontend add-listing form"),H(e),C(e),I(e),D(e),re(e),se(e),ae(e),le(e),ce(e),de(e)}function ne(e){console.log("Initializing backend add-listing form");const t=e.closest("form#post");t&&(C(t),I(t),D(t),t.addEventListener("submit",o=>{if(!L(t))return o.preventDefault(),ue(t),!1}))}function D(e){e.querySelectorAll('.required_field:not([style*="display: none"]) [field_type]:not([style*="display: none"]), .required_field:not([style*="display: none"]) .editor textarea').forEach(n=>{n.addEventListener("blur",function(){setTimeout(()=>{S(this)},100)})}),e.querySelectorAll('.required_field:not([style*="display: none"]) input[type="checkbox"], .required_field:not([style*="display: none"]) input[type="radio"]').forEach(n=>{n.addEventListener("click",function(){S(this)})}),e.querySelectorAll('.required_field:not([style*="display: none"]) select.geodir-select').forEach(n=>{n.addEventListener("change",function(){S(this)})})}function re(e){e.addEventListener("submit",async t=>{await P(t,e)})}function se(e){const t=document.querySelector(".geodir_preview_button");t&&t.addEventListener("click",async()=>(await U(e),b(e)))}function ae(e){e.addEventListener("change",()=>{try{typeof window.aui_conditional_fields=="function"&&window.aui_conditional_fields("#geodirectory-add-post,#post")}catch(t){console.log("Conditional fields error:",t.message)}});try{typeof window.aui_conditional_fields=="function"&&window.aui_conditional_fields("#geodirectory-add-post,#post")}catch(t){console.log("Conditional fields error:",t.message)}}function le(e){const t=e.querySelector(".gd-hidden-latlng");if(!t)return;e.querySelectorAll('[type="submit"]').forEach(i=>{i.addEventListener("click",()=>{const n=e.querySelector('[name="latitude"]'),s=e.querySelector('[name="longitude"]');if(n&&s){const r=n.value.trim(),a=s.value.trim();(!r||!a)&&t.classList.remove("d-none")}})})}function ce(e){e.querySelectorAll(".gd-locate-me-btn").forEach(o=>{o.addEventListener("click",function(){typeof window.gdGeoLocateMe=="function"&&window.gdGeoLocateMe(this,"add-listing")})})}function de(e){const t=e.querySelector("select#post_tags");t&&t.spellcheck&&setTimeout(()=>{const o=e.querySelector('[data-argument="post_tags"] input.select2-search__field');o&&(o.spellcheck=!0)},5e3)}function ue(e){const t=e.querySelector('.geodir_message_error:not([style*="display: none"])');if(t){const o=t.closest(".required_field");o&&B(o,100)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",k):k();typeof window<"u"&&(window.geodir_validate_field=S,window.geodir_validate_submit=b,window.geodir_validate_admin_submit=e=>L(e),window.geodir_delete_revision=()=>{const e=document.querySelector("#geodirectory-add-post")||document.querySelector("form#post");e&&W(e)});
//# sourceMappingURL=geodir-add-listing.js.map
})();